function Map(){this.elements=new Array,this.size=function(){return this.elements.length},this.isEmpty=function(){return this.elements.length<1},this.clear=function(){this.elements=new Array},this.put=function(t,e){this.remove(t),this.elements.push({key:t,value:e})},this.remove=function(t){try{for(i=0;i<this.elements.length;i++)if(this.elements[i].key==t)return this.elements.splice(i,1),!0}catch(e){return!1}return!1},this.get=function(t){try{for(i=0;i<this.elements.length;i++)if(this.elements[i].key==t)return this.elements[i].value}catch(e){return null}},this.element=function(t){return 0>t||t>=this.elements.length?null:this.elements[t]},this.containsKey=function(t){try{for(i=0;i<this.elements.length;i++)if(this.elements[i].key==t)return!0}catch(e){return!1}return!1},this.values=function(){var t=new Array;for(i=0;i<this.elements.length;i++)t.push(this.elements[i].value);return t},this.keys=function(){var t=new Array;for(i=0;i<this.elements.length;i++)t.push(this.elements[i].key);return t}}function initEnv(){if($("body").append(DWZ.frag.dwzFrag),$.browser.msie&&/6.0/.test(navigator.userAgent))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}$.browser.msie&&window.setInterval("CollectGarbage();",1e4),$(window).resize(function(){initLayout(),$(this).trigger(DWZ.eventType.resizeGrid)});var e=$("#background,#progressBar");e.hide(),$(document).ajaxStart(function(){e.show()}).ajaxStop(function(){e.hide()}),$("#leftside").jBar({minW:150,maxW:700}),$.taskBar&&$.taskBar.init(),navTab.init(),$.fn.switchEnv&&$("#switchEnvBox").switchEnv(),$.fn.navMenu&&$("#navMenu").navMenu(),setTimeout(function(){initLayout(),initUI();var t=$("div.tabsPageHeader");t.find(".tabsLeft").hoverClass("tabsLeftHover"),t.find(".tabsRight").hoverClass("tabsRightHover"),t.find(".tabsMore").hoverClass("tabsMoreHover")},10)}function initLayout(){var t=$(window).width()-(DWZ.ui.sbar?$("#sidebar").width()+10:34)-5,e=$(window).height()-$("#header").height()-34;$("#container").width(t),$("#container .tabsPageContent").height(e-34).find("[layoutH]").layoutH(),$("#sidebar, #sidebar_s .collapse, #splitBar, #splitBarProxy").height(e-5),$("#taskbar").css({top:e+$("#header").height()+5,width:$(window).width()})}function initUI(_box){var $p=$(_box||document);$("div.panel",$p).jPanel(),$("table.table",$p).jTable(),$("table.list",$p).cssTable(),$("div.tabs",$p).each(function(){var t=$(this),e={};e.currentIndex=t.attr("currentIndex")||0,e.eventType=t.attr("eventType")||"click",t.tabs(e)}),$("ul.tree",$p).jTree(),$("div.accordion",$p).each(function(){var t=$(this);t.accordion({fillSpace:t.attr("fillSpace"),alwaysOpen:!0,active:0})}),$(":button.checkboxCtrl, :checkbox.checkboxCtrl",$p).checkboxCtrl($p),$("select.combox",$p).combox(),$("textarea.editor",$p).each(function(){var t=$(this),e={html5Upload:!1,skin:"vista",tools:t.attr("tools")||"full"},a=[["upLinkUrl","upLinkExt","zip,rar,txt"],["upImgUrl","upImgExt","jpg,jpeg,gif,png"],["upFlashUrl","upFlashExt","swf"],["upMediaUrl","upMediaExt","avi"]];$(a).each(function(i){var n=a[i][0],r=a[i][1];t.attr(n)&&(e[n]=t.attr(n),e[r]=t.attr(r)||a[i][2])}),t.xheditor(e)}),$(":file[uploaderOption]",$p).each(function(){var t=$(this),e={fileObjName:t.attr("name")||"file",auto:!0,multi:!0,onUploadError:uploadifyError},a=DWZ.jsonEval(t.attr("uploaderOption"));$.extend(e,a),DWZ.debug("uploaderOption: "+DWZ.obj2str(a)),t.uploadify(e)}),$("input[type=text], input[type=password], textarea",$p).addClass("textInput").focusClass("focus"),$("input[readonly], textarea[readonly]",$p).addClass("readonly"),$("input[disabled=true], textarea[disabled=true]",$p).addClass("disabled"),$("input[type=text]",$p).not("div.tabs input[type=text]",$p).filter("[alt]").inputAlert(),$("div.panelBar li, div.panelBar",$p).hoverClass("hover"),$("div.button",$p).hoverClass("buttonHover"),$("div.buttonActive",$p).hoverClass("buttonActiveHover"),$("div.tabsHeader li, div.tabsPageHeader li, div.accordionHeader, div.accordion",$p).hoverClass("hover"),$("form.validateForm",$p).each(function(){var t=$(this);t.validate({onsubmit:!1,focusInvalid:!1,focusCleanup:!0,errorElement:"span",ignore:".ignore",invalidHandler:function(t,e){var a=e.numberOfInvalids();if(a){var i=DWZ.msg("validateFormError",[a]);alertMsg.error(i)}}}),t.find("input[customvalid]").each(function(){var t=$(this);t.rules("add",{customvalid:t.attr("customvalid")})}),t.attr("onsubmit")||t.attr("onsubmit","return validateCallback(this, allAjaxDone)"),t.attr("method","post")}),$("form.pagerForm",$p).each(function(){var t=$(this);t.attr("onsubmit")||t.attr("onsubmit","return ajaxSearch(this)"),t.attr("method","post")}),$.fn.datepicker&&$("input.date",$p).each(function(){var t=$(this),e={};t.attr("dateFmt")&&(e.pattern=t.attr("dateFmt")),t.attr("minDate")&&(e.minDate=t.attr("minDate")),t.attr("maxDate")&&(e.maxDate=t.attr("maxDate")),t.attr("mmStep")&&(e.mmStep=t.attr("mmStep")),t.attr("ssStep")&&(e.ssStep=t.attr("ssStep")),t.datepicker(e)}),$("a[target=navTab]",$p).each(function(){$(this).click(function(event){var $this=$(this),title=$this.attr("title")||$this.text(),tabid=$this.attr("rel")||"_blank",fresh=eval($this.attr("fresh")||"true"),external=eval($this.attr("external")||"false"),url=unescape($this.attr("href")).replaceTmById($(event.target).unitBox());return DWZ.debug(url),url.isFinishedTm()?(navTab.openTab(tabid,url,{title:title,fresh:fresh,external:external}),void event.preventDefault()):(alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg")),!1)})}),$("a[target=dialog]",$p).each(function(){$(this).click(function(event){var $this=$(this),title=$this.attr("title")||$this.text(),rel=$this.attr("rel")||"_blank",options={},w=$this.attr("width")||"M",h=$this.attr("height")||"M";options.width=DWZ.dialogWidth[w]||w,options.height=DWZ.dialogHeight[h]||h,options.max=eval($this.attr("max")||"false"),options.mask=eval($this.attr("mask")||"true"),options.maxable=eval($this.attr("maxable")||"false"),options.minable=eval($this.attr("minable")||"false"),options.fresh=eval($this.attr("fresh")||"true"),options.resizable=eval($this.attr("resizable")||"false"),options.drawable=eval($this.attr("drawable")||"true"),options.close=eval($this.attr("close")||""),options.param=$this.attr("param")||"";var url=unescape($this.attr("href")).replaceTmById($(event.target).unitBox());return DWZ.debug(url),url.isFinishedTm()?($.pdialog.open(url,rel,title,options),!1):(alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg")),!1)})}),$("a[target=ajax]",$p).each(function(){$(this).click(function(t){var e=$(this),a=e.attr("rel");if(a){var i=$("#"+a,e.unitBox());i.loadUrl(e.attr("href"),{},function(){i.find("[layoutH]").layoutH()})}t.preventDefault()})}),$("div.pagination",$p).each(function(){var t=$(this);t.pagination({totalCount:t.attr("totalCount"),numPerPage:t.attr("numPerPage"),pageNumShown:t.attr("pageNumShown"),currentPage:t.attr("currentPage")})}),$("div.pages select",$p).each(function(){$(this).change(function(){var t=$(this).getPagerForm().get(0);t[DWZ.pageInfo.numPerPage].value=this.value,ajaxSearch(t)})}),$("div.sortDrag",$p).sortDrag(),$("a[target=ajaxTodo]",$p).ajaxTodo(),$("a[target=dwzExport]",$p).dwzExport(),$("a[lookupGroup]",$p).lookup(),$("[multLookup]:button",$p).multLookup(),$("input[suggestFields]",$p).suggest(),$("table.masterSlave",$p).masterSlave(),$("a[target=selectedTodo]",$p).selectedTodo(),$("[class*=fa-]:not(i)",$p).each(function(){var t=$("<i></i>");t.css("line-height","inherit"),t.addClass("fa");var e=$(this).attr("class").split(" ");for(var a in e)e[a].startsWith("fa-")&&(t.addClass(e[a]),$(this).removeClass(e[a]));$(this).is(":empty")||$(this).prepend("&nbsp;"),$(this).prepend(t)}),$("div.slider").each(function(){var t=$(this),e={width:t.attr("width")||"100%",height:t.attr("height")||"100%",responsive:!0,nexttext:'<i class="fa fa-arrow-right"></i>',prevtext:'<i class="fa fa-arrow-left"></i>'};t.bjqs(e)}),$.fn.viewSource&&$("a.viewsource",$p).viewSource(),$.each(DWZ.regPlugins,function(t,e){e($p)})}function validateCallback(t,e,a){var i=$(t);if(!i.valid())return!1;var n=function(){$.ajax({type:t.method||"POST",url:i.attr("action"),data:i.serializeArray(),dataType:"json",cache:!1,success:e||DWZ.ajaxDone,error:DWZ.ajaxError})};return a?alertMsg.confirm(a,{okCall:n}):n(),!1}function iframeCallback(t,e){var a=$(t),i=$("#callbackframe");return a.valid()?(0==i.size()&&(i=$("<iframe id='callbackframe' name='callbackframe' src='about:blank' style='display:none'></iframe>").appendTo("body")),t.ajax||a.append('<input type="hidden" name="ajax" value="1" />'),t.target="callbackframe",void _iframeResponse(i[0],e||DWZ.ajaxDone)):!1}function _iframeResponse(t,e){var a=$(t),i=$(document);i.trigger("ajaxStart"),a.bind("load",function(){if(a.unbind("load"),i.trigger("ajaxStop"),"javascript:'%3Chtml%3E%3C/html%3E';"!=t.src&&"javascript:'<html></html>';"!=t.src){var n=t.contentDocument||t.document;if(!(n.readyState&&"complete"!=n.readyState||n.body&&"false"==n.body.innerHTML)){var r;if(n.XMLDocument)r=n.XMLDocument;else if(n.body)try{r=a.contents().find("body").text(),r=jQuery.parseJSON(r)}catch(s){r=n.body.innerHTML}else r=n;e(r)}}})}function allAjaxDone(t){DWZ.ajaxDone(t),t[DWZ.keys.statusCode]==DWZ.statusCode.ok&&(_reloadDiv(t),_closeDialog(t),_reloadDialog(t),_reloadNavTab(t),_closeNavTab(t))}function ajaxSearch(t){var e=$(t),a=e.attr("rel");return a?_reloadDiv({reloadDiv:[a]}):e.unitBox().hasClass("dialogContent")?_reloadDialog({reloadDialog:[""]}):_reloadNavTab({reloadNavTab:[""]}),!1}function _closeNavTab(t){for(var e=_parseToResults(t.closeNavTab),a=0;a<e.length;a++)""===e[a].id?navTab.closeCurrentTab():navTab.closeTab(e[a])}function _reloadNavTab(t){for(var e=_parseToResults(t.reloadNavTab),a=0;a<e.length;a++)navTab.reload(e[a])}function _closeDialog(t){for(var e=_parseToResults(t.closeDialog),a=0;a<e.length;a++)""===e[a].id?$.pdialog.closeCurrent():$.pdialog.close(e[a])}function _reloadDialog(t){for(var e=_parseToResults(t.reloadDialog),a=0;a<e.length;a++){var i={dialogId:e[a].id,data:e[a].data||{},callback:e[a].callback};$.pdialog.reload(e[a].url||$.pdialog._current.data("url"),i)}}function _reloadDiv(t){for(var e=_parseToResults(t.reloadDiv),a=0;a<e.length;a++){var i={data:e[a].data||{},callback:e[a].callback},n=_getDivInCurrent("#"+e[a].id),r=n.getPagerForm();r&&$.extend(i.data,r.serializeJson());var s=e[a].url||r.attr("action");$.extend(i.data,s.getParams()),n.ajaxUrl({type:"POST",url:s,data:i.data,callback:function(t){n.find("[layoutH]").layoutH(),$.isFunction(i.callback)&&i.callback(t)}})}}function _getDivInCurrent(t){var e;if($.pdialog.getCurrent()&&(e=$("#"+t,$.pdialog.getCurrent()),e.length>0))return e;if(e=$("#"+t,navTab.getCurrentPanel()),e.length>0)return e;throw new Error("当前页面未找到[id="+t+"的元素。")}function _parseToResults(t){var e=[];if(t)for(var a=0;a<t.length;a++){var i=t[a].split(","),n={id:i[0],url:i[1]||"",data:i[2]?i[2].toJson():{},callback:i[3]||""};e.push(n)}return e}function ajaxTodo(url,callback){var $callback=callback||allAjaxDone;$.isFunction($callback)||($callback=eval("("+callback+")")),$.ajax({type:"POST",url:url,dataType:"json",cache:!1,success:$callback,error:DWZ.ajaxError})}function uploadifyError(t,e,a){alertMsg.error(e+": "+a)}!function(){$.extend(String.prototype,{isPositiveInteger:function(){return new RegExp(/^[1-9]\d*$/).test(this)},isInteger:function(){return new RegExp(/^\d+$/).test(this)},isNumber:function(t,e){return new RegExp(/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/).test(this)},trim:function(){return this.replace(/(^\s*)|(\s*$)|\r|\n/g,"")},startsWith:function(t){return 0===this.indexOf(t)},endsWith:function(t){var e=this.length-t.length;return e>=0&&this.lastIndexOf(t)===e},replaceSuffix:function(t){return this.replace(/\[[0-9]+\]/,"["+t+"]").replace("#index#",t)},trans:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')},encodeTXT:function(){return this.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll(" ","&nbsp;")},replaceAll:function(t,e){return this.replace(new RegExp(t,"gm"),e)},replaceTm:function(t){return t?this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})","g"),function(e){return t[e.replace(/[{}]+/g,"")]}):this},replaceTmById:function(t){var e=t||$(document);return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})","g"),function(t){var a=e.find("#"+t.replace(/[{}]+/g,""));return a.val()?a.val():t})},isFinishedTm:function(){return!new RegExp("{[A-Za-z_]+[A-Za-z0-9_]*}").test(this)},skipChar:function(t){return this&&0!==this.length?this.charAt(0)===t?this.substring(1).skipChar(t):this:""},isValidPwd:function(){return new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/).test(this)},isValidMail:function(){return new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(this.trim())},isSpaces:function(){for(var t=0;t<this.length;t+=1){var e=this.charAt(t);if(" "!=e&&"\n"!=e&&"	"!=e&&"\r"!=e)return!1}return!0},isPhone:function(){return new RegExp(/(^([0-9]{3,4}[-])?\d{3,8}(-\d{1,6})?$)|(^\([0-9]{3,4}\)\d{3,8}(\(\d{1,6}\))?$)|(^\d{3,8}$)/).test(this)},isUrl:function(){return new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%&=:]*)$/).test(this)},isExternalUrl:function(){return this.isUrl()&&-1==this.indexOf("://"+document.domain)},escape:function(){return this.replace(/[#;&,\.\+\*~':"!\^\$\[\]\(\)=>|\/\\]/g,"\\$&")},toJson:function(){return this.length>0?$.parseJSON('{"'+decodeURI(this.replace(/&/g,'","').replace(/=/g,'":"'))+'"}'):{}},cleanParams:function(){var t=this.indexOf("?");return-1==t?this:this.substring(0,t)},getParams:function(){var t=this.indexOf("?");if(-1==t)return{};var e=this.substring(t+1);return e.toJson()}})}(),function(){function LZ(t){return(0>t||t>9?"":"0")+t}function formatDate(t,e){e+="";var a,i="",n=0,r="",s="",o=t.getYear()+"",l=t.getMonth()+1,c=t.getDate(),d=t.getDay(),a=t.getHours(),h=t.getMinutes(),u=t.getSeconds(),f={};for(o.length<4&&(o=""+(o-0+1900)),f.y=""+o,f.yyyy=o,f.yy=o.substring(2,4),f.M=l,f.MM=LZ(l),f.MMM=MONTH_NAMES[l-1],f.NNN=MONTH_NAMES[l+11],f.d=c,f.dd=LZ(c),f.E=DAY_NAMES[d+7],f.EE=DAY_NAMES[d],f.H=a,f.HH=LZ(a),0==a?f.h=12:a>12?f.h=a-12:f.h=a,f.hh=LZ(f.h),a>11?f.K=a-12:f.K=a,f.k=a+1,f.KK=LZ(f.K),f.kk=LZ(f.k),a>11?f.a="PM":f.a="AM",f.m=h,f.mm=LZ(h),f.s=u,f.ss=LZ(u);n<e.length;){for(r=e.charAt(n),s="";e.charAt(n)==r&&n<e.length;)s+=e.charAt(n++);i+=null!=f[s]?f[s]:s}return i}function _isInteger(t){return new RegExp(/^\d+$/).test(t)}function _getInt(t,e,a,i){for(var n=i;n>=a;n--){var r=t.substring(e,e+n);if(r.length<a)return null;if(_isInteger(r))return r}return null}function parseDate(t,e){t+="",e+="";for(var a,i,n=0,r=0,s="",o="",l=new Date(1900,0,1),c=l.getYear(),d=l.getMonth()+1,h=1,u=l.getHours(),f=l.getMinutes(),p=l.getSeconds(),g="";r<e.length;){for(s=e.charAt(r),o="";e.charAt(r)==s&&r<e.length;)o+=e.charAt(r++);if("yyyy"==o||"yy"==o||"y"==o){if("yyyy"==o&&(a=4,i=4),"yy"==o&&(a=2,i=2),"y"==o&&(a=2,i=4),c=_getInt(t,n,a,i),null==c)return 0;n+=c.length,2==c.length&&(c=c>70?1900+(c-0):2e3+(c-0))}else if("MMM"==o||"NNN"==o){d=0;for(var v=0;v<MONTH_NAMES.length;v++){var m=MONTH_NAMES[v];if(t.substring(n,n+m.length).toLowerCase()==m.toLowerCase()&&("MMM"==o||"NNN"==o&&v>11)){d=v+1,d>12&&(d-=12),n+=m.length;break}}if(1>d||d>12)return 0}else if("EE"==o||"E"==o)for(var v=0;v<DAY_NAMES.length;v++){var b=DAY_NAMES[v];if(t.substring(n,n+b.length).toLowerCase()==b.toLowerCase()){n+=b.length;break}}else if("MM"==o||"M"==o){if(d=_getInt(t,n,o.length,2),null==d||1>d||d>12)return 0;n+=d.length}else if("dd"==o||"d"==o){if(h=_getInt(t,n,o.length,2),null==h||1>h||h>31)return 0;n+=h.length}else if("hh"==o||"h"==o){if(u=_getInt(t,n,o.length,2),null==u||1>u||u>12)return 0;n+=u.length}else if("HH"==o||"H"==o){if(u=_getInt(t,n,o.length,2),null==u||0>u||u>23)return 0;n+=u.length}else if("KK"==o||"K"==o){if(u=_getInt(t,n,o.length,2),null==u||0>u||u>11)return 0;n+=u.length}else if("kk"==o||"k"==o){if(u=_getInt(t,n,o.length,2),null==u||1>u||u>24)return 0;n+=u.length,u--}else if("mm"==o||"m"==o){if(f=_getInt(t,n,o.length,2),null==f||0>f||f>59)return 0;n+=f.length}else if("ss"==o||"s"==o){if(p=_getInt(t,n,o.length,2),null==p||0>p||p>59)return 0;n+=p.length}else if("a"==o){if("am"==t.substring(n,n+2).toLowerCase())g="AM";else{if("pm"!=t.substring(n,n+2).toLowerCase())return 0;g="PM"}n+=2}else{if(t.substring(n,n+o.length)!=o)return 0;n+=o.length}}if(n!=t.length)return 0;if(2==d)if(c%4==0&&c%100!=0||c%400==0){if(h>29)return 0}else if(h>28)return 0;return(4==d||6==d||9==d||11==d)&&h>30?0:(12>u&&"PM"==g?u=u-0+12:u>11&&"AM"==g&&(u-=12),new Date(c,d-1,h,u,f,p))}function replaceTmEval(data){return data.replace(RegExp("({[A-Za-z0-9_+-]*})","g"),function($1){return eval("("+$1.replace(/[{}]+/g,"")+")")})}var MONTH_NAMES=new Array("January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),DAY_NAMES=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat");Date.prototype.formatDate=function(t){return formatDate(this,t)},String.prototype.parseDate=function(t){return this.length<t.length&&(t=t.slice(0,this.length)),parseDate(this,t)},Date.prototype.formatDateTm=function(t){var e=this.getFullYear(),a=this.getMonth()+1,i=this.getDate(),n=t.replaceAll("%y",e).replaceAll("%M",a).replaceAll("%d",i);n=replaceTmEval(n);var r=1900,s=0,o=1,l=n.split("-");return l.length>0&&(r=l[0]),l.length>1&&(s=l[1]-1),l.length>2&&(o=l[2]),new Date(r,s,o).formatDate("yyyy-MM-dd")}}();var DWZ={regPlugins:[],keyCode:{ENTER:13,ESC:27,END:35,HOME:36,SHIFT:16,TAB:9,LEFT:37,RIGHT:39,UP:38,DOWN:40,DELETE:46,BACKSPACE:8},eventType:{pageClear:"pageClear",resizeGrid:"resizeGrid"},isOverAxis:function(t,e,a){return t>e&&e+a>t},isOver:function(t,e,a,i,n,r){return this.isOverAxis(t,a,n)&&this.isOverAxis(e,i,r)},pageInfo:{pageNum:"pageNum",numPerPage:"numPerPage",orderField:"orderField",orderDirection:"orderDirection"},statusCode:{ok:"200",error:"300",timeout:"301"},keys:{statusCode:"statusCode",message:"message"},ui:{sbar:!0,hideMode:"display"},dialogWidth:{SSS:300,SS:400,S:500,M:700,L:900,XL:1100},dialogHeight:{SSS:250,SS:300,S:400,M:500,L:600,XL:700},frag:{dialogFrag:'<div class="dialog" style="top:150px; left:300px;">			<div class="dialogHeader" onselectstart="return false;" oncopy="return false;" onpaste="return false;" oncut="return false;">				<div class="dialogHeader_r">					<div class="dialogHeader_c">						<a class="close" href="#close">close</a>						<a class="maximize" href="#maximize">maximize</a>						<a class="restore" href="#restore">restore</a>						<a class="minimize" href="#minimize">minimize</a>						<h1>弹出窗口</h1>					</div>				</div>			</div>			<div class="dialogContent layoutBox unitBox"></div>			<div class="dialogFooter"><div class="dialogFooter_r"><div class="dialogFooter_c"></div></div></div>			<div class="resizable_h_l" tar="nw"></div>			<div class="resizable_h_r" tar="ne"></div>			<div class="resizable_h_c" tar="n"></div>			<div class="resizable_c_l" tar="w" style="height:300px;"></div>			<div class="resizable_c_r" tar="e" style="height:300px;"></div>			<div class="resizable_f_l" tar="sw"></div>			<div class="resizable_f_r" tar="se"></div>			<div class="resizable_f_c" tar="s"></div>		</div>',dialogProxy:'<div id="dialogProxy" class="dialog dialogProxy">			<div class="dialogHeader">				<div class="dialogHeader_r">					<div class="dialogHeader_c">						<a class="close" href="#close">close</a>						<a class="maximize" href="#maximize">maximize</a>						<a class="minimize" href="#minimize">minimize</a>						<h1></h1>					</div>				</div>			</div>			<div class="dialogContent"></div>			<div class="dialogFooter">				<div class="dialogFooter_r">					<div class="dialogFooter_c">					</div>				</div>			</div>		</div>',taskbar:'<div id="taskbar" style="left:0px; display:none;">			<div class="taskbarContent">				<ul></ul>			</div>			<div class="taskbarLeft taskbarLeftDisabled" style="display:none;">taskbarLeft</div>			<div class="taskbarRight" style="display:none;">taskbarRight</div>		</div>',dwzFrag:'<div id="splitBar"></div>			<div id="splitBarProxy"></div>			<div class="resizable"></div>			<div class="shadow" style="width:508px; top:148px; left:296px;">				<div class="shadow_h">					<div class="shadow_h_l"></div>					<div class="shadow_h_r"></div>					<div class="shadow_h_c"></div>				</div>				<div class="shadow_c">					<div class="shadow_c_l" style="height:296px;"></div>					<div class="shadow_c_r" style="height:296px;"></div>					<div class="shadow_c_c" style="height:296px;"></div>				</div>				<div class="shadow_f">					<div class="shadow_f_l"></div>					<div class="shadow_f_r"></div>					<div class="shadow_f_c"></div>				</div>			</div>			<div id="alertBackground" class="alertBackground"></div>			<div id="dialogBackground" class="dialogBackground"></div>			<div id="background" class="background"></div>			<div id="progressBar" class="progressBar">数据加载中，请稍等...</div>',pagination:'<ul>			<li class="j-first">				<a class="first" href="javascript:;"><span>首页</span></a>				<span class="first"><span>首页</span></span>			</li>			<li class="j-prev">				<a class="previous" href="javascript:;"><span>上一页</span></a>				<span class="previous"><span>上一页</span></span>			</li>			#pageNumFrag#			<li class="j-next">				<a class="next" href="javascript:;"><span>下一页</span></a>				<span class="next"><span>下一页</span></span>			</li>			<li class="j-last">				<a class="last" href="javascript:;"><span>末页</span></a>				<span class="last"><span>末页</span></span>			</li>			<li class="jumpto">				<input class="textInput" type="text" size="4" value="#currentPage#" />				<input class="goto" type="button" value="确定" />			</li>		</ul>',alertBoxFrag:'<div id="alertMsgBox" class="alert">			<div class="alertContent">				<div class="#type#">					<div class="alertInner"><h1>#title#</h1><div class="msg">#message#</div></div>					<div class="toolBar"><ul>#butFragment#</ul></div>				</div>			</div>			<div class="alertFooter">				<div class="alertFooter_r"><div class="alertFooter_c"></div></div></div>			</div>',alertButFrag:'<li>			<a class="button" rel="#callback#" onclick="alertMsg.close()" href="javascript:">			<span>#butMsg#</span></a>		</li>',calendarFrag:'<div id="calendar">			<div class="main">				<div class="head">					<table width="100%" border="0" cellpadding="0" cellspacing="2">					<tr>						<td><select name="year"></select></td>						<td><select name="month"></select></td>						<td width="20"><span class="close">×</span></td>					</tr>					</table>				</div>				<div class="body">					<dl class="dayNames"><dt>日</dt><dt>一</dt><dt>二</dt><dt>三</dt><dt>四</dt><dt>五</dt><dt>六</dt></dl>					<dl class="days">日期列表选项</dl>					<div style="clear:both;height:0;line-height:0"></div>				</div>				<div class="foot">					<table class="time">						<tr>							<td>								<input type="text" class="hh" maxlength="2" start="0" end="23"/>:								<input type="text" class="mm" maxlength="2" start="0" end="59"/>:								<input type="text" class="ss" maxlength="2" start="0" end="59"/>							</td>							<td><ul><li class="up">&and;</li><li class="down">&or;</li></ul></td>						</tr>					</table>					<button type="button" class="clearBut">清空</button>					<button type="button" class="okBut">确定</button>				<div>				<div class="tm">					<ul class="hh">						<li>0</li><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li>						<li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li>						<li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li>					</ul>					<ul class="mm">						<li>0</li><li>5</li><li>10</li><li>15</li><li>20</li><li>25</li>						<li>30</li><li>35</li><li>40</li><li>45</li><li>50</li><li>55</li>					</ul>					<ul class="ss">						<li>0</li><li>10</li><li>20</li><li>30</li><li>40</li><li>50</li>					</ul>				</div>			</div>		</div>',navTabCM:'<ul id="navTabCM">			<li rel="reload">刷新标签页</li>			<li rel="closeCurrent">关闭标签页</li>			<li rel="closeOther">关闭其它标签页</li>			<li rel="closeAll">关闭全部标签页</li>		</ul>',dialogCM:'<ul id="dialogCM">			<li rel="closeCurrent">关闭弹出窗口</li>			<li rel="closeOther">关闭其它弹出窗口</li>			<li rel="closeAll">关闭全部弹出窗口</li>		</ul>',externalFrag:'<iframe src="{url}" style="width:100%;height:{height};" frameborder="no" border="0" marginwidth="0" marginheight="0"></iframe>'},_msg:{statusCode_503:"服务器当前负载过大或者正在维护。",validateFormError:"{0}项内容填写有误，请检查更正。",sessionTimout:"会话超时，请重新登录。",alertSelectMsg:"请选择要操作的记录。",forwardConfirmMsg:"继续下一步。",dwzTitle:"DWZ富客户端框架",mainTabTitle:"我的首页"},_set:{loginUrl:"",loginTitle:"",debug:!1},msg:function(t,e){var a=function(t,e){e=e||[];for(var a=t||"",i=0;i<e.length;i++)a=a.replace(new RegExp("\\{"+i+"\\}","g"),e[i]);return a};return a(this._msg[t],e)},debug:function(t){this._set.debug&&("undefined"!=typeof console?console.log(t):alert(t))},loadLogin:function(){$.pdialog&&DWZ._set.loginTitle?$.pdialog.open(DWZ._set.loginUrl,"login",DWZ._set.loginTitle,{mask:!0,width:520,height:260}):window.location=DWZ._set.loginUrl},obj2str:function(t){var e=[];if("string"==typeof t)return'"'+t.replace(/([\'\"\\])/g,"\\$1").replace(/(\n)/g,"\\n").replace(/(\r)/g,"\\r").replace(/(\t)/g,"\\t")+'"';if("object"==typeof t){if(t.sort){for(var a=0;a<t.length;a++)e.push(DWZ.obj2str(t[a]));e="["+e.join()+"]"}else{for(var a in t)e.push(a+":"+DWZ.obj2str(t[a]));document.all&&!/^\n?function\s*toString\(\)\s*\{\n?\s*\[native code\]\n?\s*\}\n?\s*$/.test(t.toString)&&e.push("toString:"+t.toString.toString()),e="{"+e.join()+"}"}return e}return t.toString()},jsonEval:function(data){try{return"string"==$.type(data)?eval("("+data+")"):data}catch(e){return{}}},ajaxError:function(t,e,a){alertMsg?"404"==t.status?alertMsg.error("<div>您访问的页面未找到。</div>"):"500"==t.status?alertMsg.error("<div>服务器暂时繁忙，请稍候重试或与管理员联系。</div>"):"403"==t.status?alertMsg.error("<div>您没有执行该操作的权限，请与管理员联系。</div>"):alertMsg.error("<div>Http status: "+t.status+" "+t.statusText+"</div><div>ajaxOptions: "+e+"</div><div>thrownError: "+a+"</div><div>"+t.responseText+"</div>"):"404"==t.status?alert("您访问的页面未找到。"):"500"==t.status?alert("服务器暂时繁忙，请稍候重试或与管理员联系。"):"403"==t.status?alert("您没有执行该操作的权限，请与管理员联系。"):alert("<div>Http status: "+t.status+" "+t.statusText+"</div><div>ajaxOptions: "+e+"</div><div>thrownError: "+a+"</div><div>"+t.responseText+"</div>")},ajaxDone:function(t){var e=t[DWZ.keys.statusCode],a=t[DWZ.keys.message];switch(e){case DWZ.statusCode.error:a&&alertMsg&&alertMsg.error(a);break;case DWZ.statusCode.timeout:alertMsg?alertMsg.error(a||DWZ.msg("sessionTimout"),{okCall:DWZ.loadLogin}):DWZ.loadLogin();break;case DWZ.statusCode.ok:a&&alertMsg&&alertMsg.correct(a)}},init:function(t){var e=$.extend({loginUrl:"login.html",loginTitle:null,callback:null,debug:!1,statusCode:{},keys:{}},t);this._set.loginUrl=e.loginUrl,this._set.loginTitle=e.loginTitle,this._set.debug=e.debug,$.extend(DWZ.statusCode,e.statusCode),$.extend(DWZ.keys,e.keys),$.extend(DWZ.pageInfo,e.pageInfo),$.extend(DWZ.ui,e.ui),jQuery.isFunction(e.callback)&&e.callback();var a=$(document);a.isBind(DWZ.eventType.pageClear)||a.bind(DWZ.eventType.pageClear,function(t){var e=t.target;$.fn.xheditor&&$("textarea.editor",e).xheditor(!1)})},openNavMenu:function(t){var e=t||0;$("a",$("#navMenu")).eq(e).click()},hideSideBar:function(){var t=$("#sidebar"),e=$("#sidebar > .toggleCollapse > div");"none"!=t.css("display")&&e.click()},showSideBar:function(){var t=$("#sidebar_s"),e=$("#sidebar_s > .collapse > .toggleCollapse > div");"none"!=t.css("display")&&e.click()}};!function(t){t.setRegional=function(e,a){t.regional||(t.regional={}),t.regional[e]=a},t.fn.extend({ajaxUrl:function(e){var a=t(this);a.trigger(DWZ.eventType.pageClear),t.ajax({type:e.type||"GET",dataType:"html",url:e.url,data:e.data,cache:!1,success:function(i){var n=DWZ.jsonEval(i);n[DWZ.keys.statusCode]==DWZ.statusCode.error?n[DWZ.keys.message]&&alertMsg.error(n[DWZ.keys.message]):(a.html(i).initUI(),t.isFunction(e.callback)&&e.callback(i)),n[DWZ.keys.statusCode]==DWZ.statusCode.timeout&&(t.pdialog&&t.pdialog.checkTimeout(),navTab&&navTab.checkTimeout(),alertMsg.error(n[DWZ.keys.message]||DWZ.msg("sessionTimout"),{okCall:function(){DWZ.loadLogin()}}))},error:DWZ.ajaxError,statusCode:{503:function(t,e,a){alert(DWZ.msg("statusCode_503")||a)}}})},loadUrl:function(e,a,i){t(this).ajaxUrl({url:e,data:a,callback:i})},initUI:function(){return this.each(function(){t.isFunction(initUI)&&initUI(this)})},layoutH:function(e){return this.each(function(){var a=t(this);e||(e=a.parents("div.layoutBox:first"));var i=e.height(),n=parseInt(a.attr("layoutH")),r=i-n>50?i-n:50;a.isTag("table")?a.removeAttr("layoutH").wrap('<div layoutH="'+n+'" style="overflow:auto;height:'+r+'px"></div>'):a.height(r).css("overflow","auto")})},hoverClass:function(e,a){var i=e||"hover";return this.each(function(){var e,n=t(this);n.hover(function(){e&&clearTimeout(e),n.addClass(i)},function(){e=setTimeout(function(){n.removeClass(i)},a||10)})})},focusClass:function(e){var a=e||"textInputFocus";return this.each(function(){t(this).focus(function(){t(this).addClass(a)}).blur(function(){t(this).removeClass(a)})})},inputAlert:function(){return this.each(function(){function e(){return i.parent().find("label.alt")}function a(t){var e=i.position();return{width:i.width(),top:e.top+"px",left:e.left+"px",opacity:t||.5}}var i=t(this);if(e().size()<1){i.attr("id")||i.attr("id",i.attr("name")+"_"+Math.round(1e4*Math.random()));var n=t('<label class="alt" style="display:none;" for="'+i.attr("id")+'">'+i.attr("alt")+"</label>").appendTo(i.parent());n.css(a(.5)).show(),i.val()&&n.hide()}i.focus(function(){e().css(a(.3))}).blur(function(){t(this).val()||e().show().css("opacity",.5)}).keydown(function(){e().hide()})})},isTag:function(e){return e?t(this)[0].tagName.toLowerCase()==e:!1},isBind:function(e){var a=t(this).data("events");return a&&e&&a[e]},log:function(t){return this.each(function(){console&&console.log("%s: %o",t,this)})},viewSource:function(){t(this).each(function(){t(this).click(function(t){t.preventDefault(),window.open("view-source:"+this.href)})})},unitBox:function(){return t(this).closest("div.unitBox")},getPagerForm:function(){var e=t(this).find(".pagerForm");if(0===e.length&&(e=t(this).unitBox().find(".pagerForm")),e.length>1)throw new Error("获取pagerForm时，查找到多个pagerForm，请检查代码解决冲突。");return 0===e.length?null:e},serializeJson:function(){var e={},a=t(this).serializeArray();return t.isEmptyObject(a)||jQuery.each(a,function(t,a){e[a.name]=a.value}),e}})}(jQuery),function($){if($.validator){var match=function(t,e,a){if(t){if(e instanceof RegExp)return e.test(t);a=a||"g";var i=new RegExp(e,a);return i.test(t)}return!0},getTarget=function(t,e){var a=$(t).closest("form"),i=a.find("[name="+e+"]");return 0==i.length&&(i=$(e,a)),i};$.validator.addMethod("alphanumeric",function(t,e){return this.optional(e)||match(t,/^\w+$/i)},"请输入字母、数字、下划线。"),$.validator.addMethod("lettersonly",function(t,e){return this.optional(e)||match(t,/^[a-z]+$/i)},"请输入字母。"),$.validator.addMethod("phone",function(t,e){return this.optional(e)||match(t,/^[0-9 \(\)]{7,30}$/)},"请输入正确格式的电话号码。"),$.validator.addMethod("postcode",function(t,e){return this.optional(e)||match(t,/^[0-9 A-Za-z]{5,20}$/)},"请输入正确格式的邮政编码。"),$.validator.addMethod("date",function(t,e){t=t.replace(/\s+/g,"");var a=$(e),i=a.attr("dateFmt")||"yyyy-MM-dd";return!t||t.parseDate(i)},"请输入正确格式的日期。"),$.validator.addMethod("time",function(t,e){t=t.replace(/\s+/g,"");var a=$(e),i=a.attr("timeFmt")||"HH:mm";return!t||t.parseDate(i)},"请输入正确格式的时间。"),$.validator.addMethod("price",function(t,e){return this.optional(e)||match(t,/^\d+[\.]?\d{0,2}$/)},"请输入正确格式的价格。"),$.validator.addMethod("params",function(t,e){return this.optional(e)||match(t,/^\s*[^\s=]+[ ]*=[ ]*[^\s=]+\s*$|^\s*[^\s=]+[ ]*=[ ]*[^\s=]+\s*\n+(\s*[^\s=]+[ ]*=[ ]*[^\s=]+\s*\n)*(\s*[^\s=]+[ ]*=[ ]*[^\s=]+\s*)$/g)},"请输入正确格式的参数。"),$.validator.addMethod("eqTo",function(t,e,a){var i=getTarget(e,a);return t===i.val()},"请再次输入相同的值。"),
$.validator.addMethod("gtTo",function(t,e,a){var i=getTarget(e,a);return t&&i.val()?parseFloat(t)>parseFloat(i.val()):!0},"截止值必须大于起始值。"),$.validator.addMethod("geTo",function(t,e,a){var i=getTarget(e,a);return t&&i.val()?parseFloat(t)>=parseFloat(i.val()):!0},"截止值必须大于等于起始值。"),$.validator.addMethod("ltTo",function(t,e,a){var i=getTarget(e,a);return t&&i.val()?parseFloat(t)<parseFloat(i.val()):!0},"起始值必须小于截止值。"),$.validator.addMethod("leTo",function(t,e,a){var i=getTarget(e,a);return t&&i.val()?parseFloat(t)<=parseFloat(i.val()):!0},"起始值必须小于等于截止值。"),$.validator.addMethod("gtToDate",function(t,e,a){var i=$(e),n=getTarget(e,a),r=i.attr("dateFmt")||"yyyy-MM-dd",s=n.attr("dateFmt")||"yyyy-MM-dd";return i.val()&&n.val()?i.val().parseDate(r)>n.val().parseDate(s):!0},"截止日期必须大于起始日期。"),$.validator.addMethod("geToDate",function(t,e,a){var i=$(e),n=getTarget(e,a),r=i.attr("dateFmt")||"yyyy-MM-dd",s=n.attr("dateFmt")||"yyyy-MM-dd";return i.val()&&n.val()?i.val().parseDate(r)>=n.val().parseDate(s):!0},"截止日期必须大于等于起始日期。"),$.validator.addMethod("gtToTime",function(t,e,a){var i=$(e),n=getTarget(e,a),r=i.attr("timeFmt")||"HH:mm",s=n.attr("timeFmt")||"HH:mm";return i.val()&&n.val()?i.val().parseDate(r)>n.val().parseDate(s):!0},"截止时间必须大于起始时间。"),$.validator.addMethod("geToTime",function(t,e,a){var i=$(e),n=getTarget(e,a),r=i.attr("timeFmt")||"HH:mm",s=n.attr("timeFmt")||"HH:mm";return i.val()&&n.val()?i.val().parseDate(r)>=n.val().parseDate(s):!0},"截止时间必须大于等于起始时间。"),$.validator.addMethod("customvalid",function(value,element,params){try{return eval("("+params+")")}catch(e){return!1}},"请修正该字段信息。"),$.validator.addClassRules({date:{date:!0},alphanumeric:{alphanumeric:!0},lettersonly:{lettersonly:!0},phone:{phone:!0},postcode:{postcode:!0},time:{time:!0},price:{price:!0},params:{params:!0}}),$.validator.setDefaults({errorElement:"span",errorPlacement:function(t,e){t.addClass("fa fa-bell-o red test"),e.attr("title",t.text()),e.hasClass("hideError")||(e.is("input:checkbox")&&e.parent().is("label.unit")?e.parent().parent().append(t):e.parent().append(t)),t.empty()}}),$.validator.autoCreateRanges=!0,$.validator.prototype.showLabel=function(t,e){var a=this.errorsFor(t);a.length?(a.removeClass(this.settings.validClass).addClass(this.settings.errorClass),a.html(e).attr("title",e)):(a=$("<"+this.settings.errorElement+">"),a.attr("for",this.idOrName(t)),a.addClass(this.settings.errorClass),a.html(e||"").attr("title",e||""),this.settings.wrapper&&(a=a.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(a).length||(this.settings.errorPlacement?this.settings.errorPlacement(a,$(t)):a.insertAfter(t))),!e&&this.settings.success&&(a.text("").attr("title",""),"string"==typeof this.settings.success?a.addClass(this.settings.success):this.settings.success(a,t)),this.toShow=this.toShow.add(a)}}}(jQuery),function(t){t.fn.cssv=function(e){var a=t(this).css(e);return 1*a.substring(0,a.indexOf("px"))},t.fn.jBar=function(e){var a=t.extend({container:"#container",collapse:".collapse",toggleBut:".toggleCollapse div",sideBar:"#sidebar",sideBar2:"#sidebar_s",splitBar:"#splitBar",splitBar2:"#splitBarProxy"},e);return this.each(function(){var i=this,n=t(a.sideBar2,i),r=t(a.sideBar,i);t(a.toggleBut,r).click(function(){DWZ.ui.sbar=!1,t(a.splitBar).hide();var e=n.cssv("left")+n.outerWidth(),i=e-r.outerWidth(),s=t(a.container).cssv("left")-(r.outerWidth()-n.outerWidth()),o=r.outerWidth()-n.outerWidth()+t(a.container).outerWidth();return t(a.container).animate({left:s,width:o},50,function(){r.animate({left:i},500,function(){r.hide(),n.show().css("left",-50).animate({left:5},200),t(window).trigger(DWZ.eventType.resizeGrid)})}),t(a.collapse,n).click(function(){function e(){t(a.container).unbind("click",e),DWZ.ui.sbar||r.animate({left:i},500,function(){r.hide()})}var s=n.cssv("left")+n.outerWidth();return r.is(":hidden")?(t(a.toggleBut,r).hide(),r.show().animate({left:s},500),t(a.container).click(e)):r.animate({left:i},500,function(){r.hide()}),!1}),!1}),t(a.toggleBut,n).click(function(){return DWZ.ui.sbar=!0,n.animate({left:-25},200,function(){r.show()}),r.animate({left:5},800,function(){t(a.splitBar).show(),t(a.toggleBut,r).show();var e=5+r.outerWidth()+t(a.splitBar).outerWidth(),i=t(a.container).outerWidth()-(e-t(a.container).cssv("left"));t(a.container).css({left:e,width:i}),t(a.collapse,n).unbind("click"),t(window).trigger(DWZ.eventType.resizeGrid)}),!1}),t(a.splitBar).mousedown(function(i){t(a.splitBar2).each(function(){var n=t(this);return setTimeout(function(){n.show()},100),n.css({visibility:"visible",left:t(a.splitBar).css("left")}),n.jDrag(t.extend(e,{obj:t("#sidebar"),move:"horizontal",event:i,stop:function(){t(this).css("visibility","hidden");var e=t(this).cssv("left")-t(a.splitBar).cssv("left"),i=r.outerWidth()+e,n=t(a.container).cssv("left")+e,s=t(a.container).outerWidth()-e;r.css("width",i),t(a.splitBar).css("left",t(this).css("left")),t(a.container).css({left:n,width:s})}})),!1})})})}}(jQuery),function(t){t.fn.jDrag=function(e){return"string"==typeof e&&"destroy"==e?this.each(function(){t(this).unbind("mousedown",t.rwdrag.start),t.data(this,"pp-rwdrag",null)}):this.each(function(){var a=t(this);if(t.data(t.rwdrag,"pp-rwdrag",{options:t.extend({el:a,obj:a},e)}),e.event)t.rwdrag.start(e.event);else{var i=e.selector;t(i,obj).bind("mousedown",t.rwdrag.start)}})},t.rwdrag={start:function(e){document.onselectstart=function(t){return!1};var a=t.data(this,"pp-rwdrag"),i=a.options.el[0];t.data(i,"pp-rwdrag",{options:a.options}),t.rwdrag.current||(t.rwdrag.current={el:i,oleft:parseInt(i.style.left)||0,otop:parseInt(i.style.top)||0,ox:e.pageX||e.screenX,oy:e.pageY||e.screenY},t(document).bind("mouseup",t.rwdrag.stop).bind("mousemove",t.rwdrag.drag))},drag:function(e){if(!e)var e=window.event;var a=t.rwdrag.current,i=t.data(a.el,"pp-rwdrag"),n=a.oleft+(e.pageX||e.clientX)-a.ox,r=a.otop+(e.pageY||e.clientY)-a.oy;if(1>r&&(r=0),"horizontal"==i.options.move)i.options.minW&&n>=t(i.options.obj).cssv("left")+i.options.minW&&i.options.maxW&&n<=t(i.options.obj).cssv("left")+i.options.maxW?a.el.style.left=n+"px":i.options.scop&&(i.options.relObj?n-parseInt(i.options.relObj.style.left)>i.options.cellMinW&&(a.el.style.left=n+"px"):a.el.style.left=n+"px");else if("vertical"==i.options.move)a.el.style.top=r+"px";else{var s=i.options.selector?t(i.options.selector,i.options.obj):t(i.options.obj);n>=2*-s.outerWidth()/3&&r>=0&&n+s.outerWidth()/3<t(window).width()&&r+s.outerHeight()<t(window).height()&&(a.el.style.left=n+"px",a.el.style.top=r+"px")}return i.options.drag&&i.options.drag.apply(a.el,[a.el,e]),t.rwdrag.preventEvent(e)},stop:function(e){var a=t.rwdrag.current,i=t.data(a.el,"pp-rwdrag");return t(document).unbind("mousemove",t.rwdrag.drag).unbind("mouseup",t.rwdrag.stop),i.options.stop&&i.options.stop.apply(a.el,[a.el,e]),t.rwdrag.current=null,document.onselectstart=function(t){return!0},t.rwdrag.preventEvent(e)},preventEvent:function(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1}}}(jQuery),function($){$.extend($.fn,{jTree:function(options){var op=$.extend({checkFn:null,selected:"selected",exp:"expandable",coll:"collapsable",firstExp:"first_expandable",firstColl:"first_collapsable",lastExp:"last_expandable",lastColl:"last_collapsable",folderExp:"folder_expandable",folderColl:"folder_collapsable",endExp:"end_expandable",endColl:"end_collapsable",file:"file",ck:"checked",unck:"unchecked"},options);return this.each(function(){var $this=$(this),cnum=$this.children().length;$(">li",$this).each(function(){var t=$(this),e=!t.prev()[0],a=!t.next()[0];t.genTree({icon:$this.hasClass("treeFolder"),ckbox:$this.hasClass("treeCheck"),options:op,level:0,exp:cnum>1?e?op.firstExp:a?op.lastExp:op.exp:op.endExp,coll:cnum>1?e?op.firstColl:a?op.lastColl:op.coll:op.endColl,showSub:!$this.hasClass("collapse")&&($this.hasClass("expand")||(cnum>1?!!e:!0)),isLast:cnum>1?!!a:!0})}),setTimeout(function(){if($this.hasClass("treeCheck")){var checkFn=eval($this.attr("oncheck"));checkFn&&$.isFunction(checkFn)&&$("div.ckbox",$this).each(function(){var t=$(this);t.click(function(){var e=$(t).hasClass("checked"),a=[];if(e){var i=$(t).parent().parent(),n=$("input",i);n.size()>1?$(n).each(function(){a[a.length]={name:$(this).attr("name"),value:$(this).val(),text:$(this).attr("text")}}):a={name:n.attr("name"),value:n.val(),text:n.attr("text")}}checkFn({checked:e,items:a})})})}$("a",$this).click(function(t){$("div."+op.selected,$this).removeClass(op.selected);var e=$(this).parent().addClass(op.selected),a=$(this).parents("li:first"),i=a.attr("target");return i&&(0==$("#"+i,$this).size()&&$this.prepend('<input id="'+i+'" type="hidden" />'),$("#"+i,$this).val(a.attr("rel"))),$(".ckbox",e).trigger("click"),t.stopPropagation(),$(document).trigger("click"),$(this).attr("target")?void 0:!1})},1)})},subTree:function(t,e){return this.each(function(){$(">li",this).each(function(){var a=$(this),i=!a.next()[0];a.genTree({icon:t.icon,ckbox:t.ckbox,exp:i?t.options.lastExp:t.options.exp,coll:i?t.options.lastColl:t.options.coll,options:t.options,level:e,space:i?null:t.space,showSub:t.showSub,isLast:i})})})},genTree:function(t){function e(t,e){if(t>0){var a=e.parent().parent(),i=a.next()[0]?"line":"indent",n="<div class='"+i+"'></div>";if(t>1){for(var r=$(">div>div",a).filter(":first"),s="";t>1;)s=s+"<div class='"+r.attr("class")+"'></div>",r=r.next(),t--;n=s+n}$(">div",e).prepend(n)}}var a=$.extend({icon:t.icon,ckbox:t.ckbox,exp:"",coll:"",showSub:!1,level:0,options:null,isLast:!1},t);return this.each(function(){var t=$(this),i=$(">ul",t),n=t.parent().prev(),r="unchecked";a.ckbox&&$(">.checked",n).size()>0&&(r="checked"),i.size()>0?(t.children("a,span").wrapAll("<div></div>"),$(">div",t).prepend("<div class='"+(a.showSub?a.coll:a.exp)+"'></div>"+(a.ckbox?"<div class='ckbox "+r+"'></div>":"")+(a.icon?"<div class='"+(a.showSub?a.options.folderColl:a.options.folderExp)+"'></div>":"")),a.showSub?i.show():i.hide(),$(">div>div:first,>div>a",t).click(function(){var e=$(">li:first",i);e.children(":first").isTag("a")&&i.subTree(a,a.level+1);var n=$(this),r=n.isTag("a"),n=r?$(">div>div",t).eq(a.level):n;return r&&!i.is(":hidden")||(n.toggleClass(a.exp).toggleClass(a.coll),a.icon&&$(">div>div:last",t).toggleClass(a.options.folderExp).toggleClass(a.options.folderColl)),i.is(":hidden")?i.slideDown("fast"):r?"":i.slideUp("fast"),!1}),e(a.level,t),a.showSub&&i.subTree(a,a.level+1)):(t.children().wrapAll("<div></div>"),$(">div",t).prepend("<div class='node'></div>"+(a.ckbox?"<div class='ckbox "+r+"'></div>":"")+(a.icon?"<div class='file'></div>":"")),e(a.level,t),a.isLast&&$(t).addClass("last")),a.ckbox&&t._check(a),$(">div",t).mouseover(function(){$(this).addClass("hover")}).mouseout(function(){$(this).removeClass("hover")}),$.browser.msie&&$(">div",t).click(function(){return $("a",this).trigger("click"),!1})})},_check:function(t){var e=$(this),a=$(">div>.ckbox",e),i=e.find("a"),n=i.attr("tname"),r=i.attr("tvalue"),s="text='"+i.text()+"' ";n&&(s+="name='"+n+"' "),r&&(s+="value='"+r+"' "),a.append("<input type='checkbox' style='display:none;' "+s+"/>").click(function(){var t=a.hasClass("checked"),i=t?"unchecked":"checked",n=t?"checked":"unchecked";return a.removeClass(n).removeClass(t?"":"indeterminate").addClass(i),$("input",a).attr("checked",!t),$(">ul",e).find("li").each(function(){var e=$("div.ckbox",this);e.removeClass(n).removeClass(t?"":"indeterminate").addClass(i).find("input").attr("checked",!t)}),$(e)._checkParent(),!1});var o=i.attr("checked")||!1;o&&(a.find("input").attr("checked",!0),a.removeClass("unchecked").addClass("checked"),$(e)._checkParent())},_checkParent:function(){if(!$(this).parent().hasClass("tree")){var t=$(this).parent().parent(),e=$(">ul",t),a=e.find(">li>a").size()+e.find("div.ckbox").size(),i=e.find("div.checked").size(),n=i==a?"checked":0!=i?"indeterminate":"unchecked",r=i==a?"indeterminate":0!=i?"checked":"indeterminate";$(">div>.ckbox",t).removeClass("unchecked").removeClass("checked").removeClass(r).addClass(n);var s=$(":checkbox",t);"checked"==n?s.attr("checked","checked"):"unchecked"==n&&s.removeAttr("checked"),t._checkParent()}}})}(jQuery),function(t){function e(t,e){return function(){return t.apply(e,arguments)}}function a(e){if(t.data(this,"dwz-accordion")){var a=t.data(this,"dwz-accordion"),i=a.options;i.running=e?0:--i.running,i.running||(i.clearStyle&&i.toShow.add(i.toHide).css({height:"",overflow:""}),t(this).triggerHandler("change.dwz-accordion",[i.data],i.change))}}function i(e){var a=o.get(e);if(a){var i=t(a).parent(),n=i.height()-t(".accordionHeader",a).size()*t(".accordionHeader:first-child",a).outerHeight()-2,r=i.children().not(a);t.each(r,function(e){n-=t(r[e]).outerHeight()}),t(".accordionContent",a).height(n)}}function n(i,n,r,s,o){var l=t.data(this,"dwz-accordion").options;l.toShow=i,l.toHide=n,l.data=r;var c=e(a,this);l.running=0==n.size()?i.size():n.size(),l.animated?!l.alwaysOpen&&s?t.dwz.accordion.animations[l.animated]({toShow:jQuery([]),toHide:n,complete:c,down:o,autoheight:l.autoheight}):t.dwz.accordion.animations[l.animated]({toShow:i,toHide:n,complete:c,down:o,autoheight:l.autoheight}):(!l.alwaysOpen&&s?i.toggle():(n.hide(),i.show()),c(!0))}function r(e){var a=t.data(this,"dwz-accordion").options;if(a.disabled)return!1;if(!e.target&&!a.alwaysOpen){a.active.find("h2").toggleClass(a.selectedClass);var i=a.active.next(),r={instance:this,options:a,newHeader:jQuery([]),oldHeader:a.active,newContent:jQuery([]),oldContent:i},s=a.active=t([]);return n.call(this,s,i,r),!1}var o=t(e.target);if(o.parents(a.header).length)for(;!o.is(a.header);)o=o.parent();var l=o[0]==a.active[0];if(a.running||a.alwaysOpen&&l)return!1;if(o.is(a.header)){a.active.find("h2").toggleClass(a.selectedClass),l||o.find("h2").addClass(a.selectedClass);var s=o.next(),i=a.active.next(),r={instance:this,options:a,newHeader:o,oldHeader:a.active,newContent:s,oldContent:i},c=a.headers.index(a.active[0])>a.headers.index(o[0]);return a.active=l?t([]):o,n.call(this,s,i,r,l,c),!1}}function s(e,a){return void 0!=a?"number"==typeof a?e.filter(":eq("+a+")"):e.not(e.not(a)):a===!1?t([]):e.filter(":eq(0)")}var o=new Map;t.dwz=t.dwz||{},t(window).resize(function(){setTimeout(function(){for(var t=0;t<o.size();t++)i(o.element(t).key)},100)}),t.fn.extend({accordion:function(e,a){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){if(e.fillSpace&&o.put(e.fillSpace,this),"string"==typeof e){var a=t.data(this,"dwz-accordion");a[e].apply(a,i)}else t(this).is(".dwz-accordion")||t.data(this,"dwz-accordion",new t.dwz.accordion(this,e))})},activate:function(t){return this.accordion("activate",t)}}),t.dwz.accordion=function(e,a){if(this.options=a=t.extend({},t.dwz.accordion.defaults,a),this.element=e,t(e).addClass("dwz-accordion"),a.navigation){var n=t(e).find("a").filter(a.navigationFilter);n.length&&(n.filter(a.header).length?a.active=n:(a.active=n.parent().parent().prev(),n.addClass("current")))}if(a.headers=t(e).find(a.header),a.active=s(a.headers,a.active),a.fillSpace)i(a.fillSpace);else if(a.autoheight){var o=0;a.headers.next().each(function(){o=Math.max(o,t(this).outerHeight())}).height(o)}a.headers.not(a.active||"").next().hide(),a.active.find("h2").addClass(a.selectedClass),a.event&&t(e).bind(a.event+".dwz-accordion",r)},t.dwz.accordion.prototype={activate:function(t){r.call(this.element,{target:s(this.options.headers,t)[0]})},enable:function(){this.options.disabled=!1},disable:function(){this.options.disabled=!0},destroy:function(){this.options.headers.next().css("display",""),(this.options.fillSpace||this.options.autoheight)&&this.options.headers.next().css("height",""),t.removeData(this.element,"dwz-accordion"),t(this.element).removeClass("dwz-accordion").unbind(".dwz-accordion")}},t.extend(t.dwz.accordion,{defaults:{selectedClass:"collapsable",alwaysOpen:!0,animated:"slide",event:"click",header:".accordionHeader",autoheight:!0,running:0,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()}},animations:{slide:function(e,a){if(e=t.extend({easing:"swing",duration:300},e,a),!e.toHide.size())return void e.toShow.animate({height:"show"},e);var i=e.toHide.height(),n=e.toShow.height(),r=n/i;e.toShow.css({height:0}).show(),e.toHide.filter(":hidden").each(e.complete).end().filter(":visible").animate({height:"hide"},{step:function(a){var n=(i-a)*r;(t.browser.msie||t.browser.opera)&&(n=Math.ceil(n)),e.toShow.height(n)},duration:e.duration,easing:e.easing,complete:function(){e.autoheight||e.toShow.css({height:"auto"}),e.toShow.css({overflow:"auto"}),e.complete()}})},bounceslide:function(t){this.slide(t,{easing:t.down?"bounceout":"swing",duration:t.down?1e3:200})},easeslide:function(t){this.slide(t,{easing:"easeinout",duration:700})}}})}(jQuery),function(t){t.fn.extend({theme:function(e){var a=t.extend({themeBase:"themes"},e);a.themeBase+"/#theme#/";return this.each(function(){var e=t(this).find(">li[theme]"),i=function(i){t("head").find("link[href^='"+a.themeBase+"']").each(function(){var e=t(this).attr("href"),n=e.substring(e.lastIndexOf("/"));t(this).attr("href",a.themeBase+"/"+i+n)}),e.find(">div").removeClass("selected"),e.filter("[theme="+i+"]").find(">div").addClass("selected"),t.isFunction(t.cookie)&&t.cookie("dwz_theme",i)};if(e.each(function(e){var a=t(this),n=a.attr("theme");a.addClass(n).click(function(){i(n)})}),t.isFunction(t.cookie)){var n=t.cookie("dwz_theme");n&&i(n)}})}})}(jQuery),function(t){function e(e){e.addClass("selected"),t(document).bind("click",{box:e},i)}function a(e){e.removeClass("selected"),t(document).unbind("click",i)}function i(t){a(t.data.box)}t.fn.navMenu=function(){return this.each(function(){var e=t(this);e.find("li>a").click(function(){var a=t(this);return t.post(a.attr("href"),{},function(i){try{var n=t.parseJSON(i);DWZ.ajaxDone(n)}catch(r){t("#sidebar").find(".accordion").remove().end().append(i).initUI(),e.find("li").removeClass("selected"),a.parent().addClass("selected")}},"html"),!1})})},t.fn.switchEnv=function(){return this.each(function(){var i=t(this);i.click(function(){return i.hasClass("selected")?a(i):e(i),!1}),i.find(">ul>li>a").click(function(t){t.stopPropagation()})})}}(jQuery),$.setRegional("alertMsg",{title:{error:"Error",info:"Information",warn:"Warning",correct:"Successful",confirm:"Confirmation"},butMsg:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"}});var alertMsg={_boxId:"#alertMsgBox",_bgId:"#alertBackground",_closeTimer:null,_types:{error:"error",info:"info",warn:"warn",correct:"correct",confirm:"confirm"},_getTitle:function(t){return $.regional.alertMsg.title[t]},_keydownOk:function(t){return t.keyCode==DWZ.keyCode.ENTER&&t.data.target.trigger("click"),!1},_keydownEsc:function(t){t.keyCode==DWZ.keyCode.ESC&&t.data.target.trigger("click")},_open:function(t,e,a){$(this._boxId).remove();var i="";if(a)for(var n=0;n<a.length;n++){var r=a[n].call?"callback":"";i+=DWZ.frag.alertButFrag.replace("#butMsg#",a[n].name).replace("#callback#",r)}var s=DWZ.frag.alertBoxFrag.replace("#type#",t).replace("#title#",this._getTitle(t)).replace("#message#",e).replace("#butFragment#",i);$(s).appendTo("body").css({top:-$(this._boxId).height()+"px"}).animate({top:"0px"},500),this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null),this._types.info==t||this._types.correct==t?this._closeTimer=setTimeout(function(){alertMsg.close()},3500):$(this._bgId).show();for(var o=$(this._boxId).find("a.button"),l=o.filter("[rel=callback]"),c=$(document),n=0;n<a.length;n++)a[n].call&&l.eq(n).click(a[n].call),a[n].keyCode==DWZ.keyCode.ENTER&&c.bind("keydown",{target:o.eq(n)},this._keydownOk),a[n].keyCode==DWZ.keyCode.ESC&&c.bind("keydown",{target:o.eq(n)},this._keydownEsc)},close:function(){$(document).unbind("keydown",this._keydownOk).unbind("keydown",this._keydownEsc),$(this._boxId).animate({top:-$(this._boxId).height()},500,function(){$(this).remove()}),$(this._bgId).hide()},error:function(t,e){this._alert(this._types.error,t,e)},info:function(t,e){this._alert(this._types.info,t,e)},warn:function(t,e){this._alert(this._types.warn,t,e)},correct:function(t,e){this._alert(this._types.correct,t,e)},_alert:function(t,e,a){var i={okName:$.regional.alertMsg.butMsg.ok,okCall:null};$.extend(i,a);var n=[{name:i.okName,call:i.okCall,keyCode:DWZ.keyCode.ENTER}];this._open(t,e,n)},confirm:function(t,e){var a={okName:$.regional.alertMsg.butMsg.ok,okCall:null,cancelName:$.regional.alertMsg.butMsg.cancel,cancelCall:null};$.extend(a,e);var i=[{name:a.okName,call:a.okCall,keyCode:DWZ.keyCode.ENTER},{name:a.cancelName,call:a.cancelCall,keyCode:DWZ.keyCode.ESC}];this._open(this._types.confirm,t,i)}};!function(t){function e(e,s,o,l){var c=r[e],d=t(DWZ.frag[c.id]);d.find("li").hoverClass(),i.html(d),t.each(c.bindings,function(e,n){t("[rel='"+e+"']",i).bind("click",function(e){a(),n(t(s),t("#"+c.id))})});var h=o.pageX,u=o.pageY;t(window).width()<h+i.width()&&(h-=i.width()),t(window).height()<u+i.height()&&(u-=i.height()),i.css({left:h,top:u}).show(),c.shadow&&n.css({width:i.width(),height:i.height(),left:h+3,top:u+3}).show(),t(document).one("click",a),t.isFunction(c.ctrSub)&&c.ctrSub(t(s),t("#"+c.id))}function a(){i.hide(),n.hide()}var i,n,r;t.fn.extend({contextMenu:function(a,s){var o=t.extend({shadow:!0,bindings:{},ctrSub:null},s);i||(i=t('<div id="contextmenu"></div>').appendTo("body").hide()),n||(n=t('<div id="contextmenuShadow"></div>').appendTo("body").hide()),r=r||[],r.push({id:a,shadow:o.shadow,bindings:o.bindings||{},ctrSub:o.ctrSub});var l=r.length-1;return t(this).bind("contextmenu",function(t){return e(l,this,t,o),!1}),this}})}(jQuery);var navTab={componentBox:null,_tabBox:null,_prevBut:null,_nextBut:null,_panelBox:null,_moreBut:null,_moreBox:null,_currentIndex:0,_op:{id:"navTab",stTabBox:".navTab-tab",stPanelBox:".navTab-panel",mainTabId:"main",close$:"a.close",prevClass:"tabsLeft",nextClass:"tabsRight",stMore:".tabsMore",stMoreLi:"ul.tabsMoreList"},init:function(t){$.History&&$.History.init("#container");var e=this;$.extend(this._op,t),this.componentBox=$("#"+this._op.id),this._tabBox=this.componentBox.find(this._op.stTabBox),this._panelBox=this.componentBox.find(this._op.stPanelBox),this._prevBut=this.componentBox.find("."+this._op.prevClass),this._nextBut=this.componentBox.find("."+this._op.nextClass),this._moreBut=this.componentBox.find(this._op.stMore),this._moreBox=this.componentBox.find(this._op.stMoreLi),this._prevBut.click(function(){e._scrollPrev()}),this._nextBut.click(function(){e._scrollNext()}),this._moreBut.click(function(){return e._moreBox.show(),!1}),$(document).click(function(){e._moreBox.hide()}),this._contextmenu(this._tabBox),this._contextmenu(this._getTabs()),this._init(),this._ctrlScrollBut()},_init:function(){var t=this;this._getTabs().each(function(e){$(this).unbind("click").click(function(){t._switchTab(e)}),$(this).find(navTab._op.close$).unbind("click").click(function(){t._closeTab(e)})}),this._getMoreLi().each(function(e){$(this).find(">a").unbind("click").click(function(){t._switchTab(e)})}),this._switchTab(this._currentIndex)},_contextmenu:function(t){var e=this;t.contextMenu("navTabCM",{bindings:{reload:function(t){t.data("flag",1),e._reload(t,!0)},closeCurrent:function(t){var a=t.attr("tabid");a?e.closeTab(a):e.closeCurrentTab()},closeOther:function(t){var a=e._indexTabId(t.attr("tabid"));e._closeOtherTab(a>0?a:e._currentIndex)},closeAll:function(){e.closeAllTab()}},ctrSub:function(t,a){var i=a.find("[rel='reload']"),n=a.find("[rel='closeCurrent']"),r=a.find("[rel='closeOther']"),s=a.find("[rel='closeAll']"),o=e._getTabs();o.size()<2&&(n.addClass("disabled"),r.addClass("disabled"),s.addClass("disabled")),0==e._currentIndex||t.attr("tabid")==e._op.mainTabId?(n.addClass("disabled"),i.addClass("disabled")):2==o.size()&&r.addClass("disabled")}})},_getTabs:function(){return this._tabBox.find("> li")},_getPanels:function(){return this._panelBox.find("> div")},_getMoreLi:function(){return this._moreBox.find("> li")},_getTab:function(t){var e=this._indexTabId(t);return e>=0?this._getTabs().eq(e):void 0},getPanel:function(t){var e=this._indexTabId(t);return e>=0?this._getPanels().eq(e):void 0},_getTabsW:function(t,e){return this._tabsW(this._getTabs().slice(t,e))},_tabsW:function(t){var e=0;return t.each(function(){e+=$(this).outerWidth(!0)}),e},_indexTabId:function(t){if(!t)return-1;var e=-1;return this._getTabs().each(function(a){return $(this).attr("tabid")==t?void(e=a):void 0}),e},_getLeft:function(){return this._tabBox.position().left},_getScrollBarW:function(){return this.componentBox.width()-55},_visibleStart:function(){for(var t=this._getLeft(),e=0,a=this._getTabs(),i=0;i<a.size();i++){if(e+t>=0)return i;e+=a.eq(i).outerWidth(!0)}return 0},_visibleEnd:function(){for(var t=this._getLeft(),e=0,a=this._getTabs(),i=0;i<a.size();i++)if(e+=a.eq(i).outerWidth(!0),e+t>this._getScrollBarW())return i;return a.size()},_scrollPrev:function(){var t=this._visibleStart();t>0&&this._scrollTab(-this._getTabsW(0,t-1))},_scrollNext:function(){var t=this._visibleEnd();t<this._getTabs().size()&&this._scrollTab(-this._getTabsW(0,t+1)+this._getScrollBarW())},_scrollTab:function(t){var e=this;this._tabBox.animate({left:t+"px"},200,function(){e._ctrlScrollBut()})},_scrollCurrent:function(){var t=this._tabsW(this._getTabs());t<=this._getScrollBarW()?this._scrollTab(0):this._getLeft()<this._getScrollBarW()-t?this._scrollTab(this._getScrollBarW()-t):this._currentIndex<this._visibleStart()?this._scrollTab(-this._getTabsW(0,this._currentIndex)):this._currentIndex>=this._visibleEnd()&&this._scrollTab(this._getScrollBarW()-this._getTabs().eq(this._currentIndex).outerWidth(!0)-this._getTabsW(0,this._currentIndex))},_ctrlScrollBut:function(){var t=this._tabsW(this._getTabs());this._getScrollBarW()>t?(this._prevBut.hide(),this._nextBut.hide(),this._tabBox.parent().removeClass("tabsPageHeaderMargin")):(this._prevBut.show().removeClass("tabsLeftDisabled"),this._nextBut.show().removeClass("tabsRightDisabled"),this._tabBox.parent().addClass("tabsPageHeaderMargin"),this._getLeft()>=0?this._prevBut.addClass("tabsLeftDisabled"):this._getLeft()<=this._getScrollBarW()-t&&this._nextBut.addClass("tabsRightDisabled"))},_switchTab:function(t){var e=this._getTabs().removeClass("selected").eq(t).addClass("selected");"offsets"==DWZ.ui.hideMode?this._getPanels().css({position:"absolute",top:"-100000px",left:"-100000px"}).eq(t).css({position:"",top:"",left:""}):this._getPanels().hide().eq(t).show(),this._getMoreLi().removeClass("selected").eq(t).addClass("selected"),this._currentIndex=t,this._scrollCurrent(),this._reload(e)},_closeTab:function(t,e){if(this._getTabs().eq(t).remove(),this._getPanels().eq(t).trigger(DWZ.eventType.pageClear).remove(),this._getMoreLi().eq(t).remove(),this._currentIndex>=t&&this._currentIndex--,e){var a=this._indexTabId(e);a>0&&(this._currentIndex=a)}this._init(),this._scrollCurrent(),this._reload(this._getTabs().eq(this._currentIndex))},closeTab:function(t){var e=this._indexTabId(t);e>0&&this._closeTab(e)},closeCurrentTab:function(t){this._currentIndex>0&&this._closeTab(this._currentIndex,t)},closeAllTab:function(){this._getTabs().filter(":gt(0)").remove(),this._getPanels().filter(":gt(0)").trigger(DWZ.eventType.pageClear).remove(),this._getMoreLi().filter(":gt(0)").remove(),this._currentIndex=0,this._init(),this._scrollCurrent()},_closeOtherTab:function(t){if(t=t||this._currentIndex,t>0){var e=":eq("+t+")";this._getTabs().not(e).filter(":gt(0)").remove(),this._getPanels().not(e).filter(":gt(0)").trigger(DWZ.eventType.pageClear).remove(),this._getMoreLi().not(e).filter(":gt(0)").remove(),this._currentIndex=1,this._init(),this._scrollCurrent()}else this.closeAllTab()},_loadUrlCallback:function(t){t.find("[layoutH]").layoutH(),t.find(":button.close").click(function(){navTab.closeCurrentTab()})},_reload:function(t){var e={url:t.attr("url"),data:t.data("data")||{},callback:t.data("callback"),flag:t.data("flag")},a=this.getPanel(t.attr("tabid"));if(e.flag&&e.url&&a)if(t.data("flag",null),t.hasClass("external"))navTab.openExternal(e.url,a);else{var i=a.getPagerForm();i&&$.extend(e.data,i.serializeJson()),$.extend(e.data,e.url.getParams()),a.ajaxUrl({type:"POST",url:e.url.cleanParams(),data:e.data,callback:function(t){navTab._loadUrlCallback(a),$.isFunction(e.callback)&&e.callback(t)}})}},reload:function(t){var e=$.extend({id:"",url:"",data:{},callback:null},t),a=e.id?this._getTab(e.id):this._getTabs().eq(this._currentIndex);e.url?a.attr("url",e.url):e.url=a.attr("url"),$.isEmptyObject(e.data)?e.data=a.data("data")||{}:a.data("data",e.data),a.data("callback",e.callback),a.data("flag",1),e.id||this._reload(a)},getCurrentPanel:function(){return this._getPanels().eq(this._currentIndex)},checkTimeout:function(){var t=DWZ.jsonEval(this.getCurrentPanel().html());t&&t[DWZ.keys.statusCode]==DWZ.statusCode.timeout&&this.closeCurrentTab()},openExternal:function(t,e){var a=navTab._panelBox.height();e.html(DWZ.frag.externalFrag.replaceAll("{url}",t).replaceAll("{height}",a+"px"))},openTab:function(t,e,a){var i=$.extend({title:"New Tab",type:"GET",data:{},fresh:!0,external:!1},a),n=this._indexTabId(t);if(n>=0){var r=this._getTabs().eq(n),s=r.attr("tabid")==this._op.mainTabId?"> span > span":"> span";r.find(">a").attr("title",i.title).find(s).html(i.title);var o=this._getPanels().eq(n);(i.fresh||r.attr("url")!=e)&&(r.attr("url",e),i.external||e.isExternalUrl()?(r.addClass("external"),navTab.openExternal(e,o)):(r.removeClass("external"),o.ajaxUrl({type:i.type,url:e,data:i.data,callback:function(){navTab._loadUrlCallback(o)}}))),this._currentIndex=n}else{var l='<li tabid="#tabid#"><a href="javascript:" title="#title#" class="#tabid#"><span>#title#</span></a><a href="javascript:;" class="close">close</a></li>';this._tabBox.append(l.replaceAll("#tabid#",t).replaceAll("#title#",i.title)),this._panelBox.append('<div class="page unitBox"></div>'),this._moreBox.append('<li><a href="javascript:" title="#title#">#title#</a></li>'.replaceAll("#title#",i.title));var c=this._getTabs(),r=c.filter(":last"),o=this._getPanels().filter(":last");i.external||e.isExternalUrl()?(r.addClass("external"),navTab.openExternal(e,o)):(r.removeClass("external"),o.ajaxUrl({type:i.type,url:e,data:i.data,callback:function(){navTab._loadUrlCallback(o)}})),$.History&&setTimeout(function(){$.History.addHistory(t,function(t){var e=navTab._indexTabId(t);e>=0&&navTab._switchTab(e)},t)},10),this._currentIndex=c.size()-1,this._contextmenu(c.filter(":last").hoverClass("hover"))}this._init(),this._scrollCurrent(),this._getTabs().eq(this._currentIndex).attr("url",e)}};!function(t){t.fn.extend({tabs:function(e){function a(e){var r=e.add(t("> *",e)),s=t(n.stTabHeader,r),o=t(n.stTab+" li",s),l=t(n.stTabPanel+" > *",r);o.unbind().find("a").unbind(),s.find("."+n.prevClass).unbind(),s.find("."+n.nextClass).unbind(),o.each(function(r){n.currentIndex==r?t(this).addClass("selected"):t(this).removeClass("selected"),"hover"==n.eventType?t(this).hover(function(t){i(e,r)}):t(this).click(function(t){i(e,r)}),t("a",this).each(function(){t(this).hasClass(n.ajaxClass)?t(this).click(function(t){var e=l.eq(r);this.href&&!e.attr("loaded")&&e.loadUrl(this.href,{},function(){e.find("[layoutH]").layoutH(),e.attr("loaded",!0)}),t.preventDefault()}):t(this).hasClass(n.closeClass)&&t(this).click(function(t){return o.eq(r).remove(),l.eq(r).remove(),r==n.currentIndex?n.currentIndex=r+1<o.size()?r:r-1:r<n.currentIndex&&(n.currentIndex=r),a(e),!1})})}),i(e,n.currentIndex)}function i(e,a){var i=e.add(t("> *",e)),r=t(n.stTabHeader,i),s=t(n.stTab+" li",r),o=t(n.stTabPanel+" > *",i),l=s.eq(a),c=o.eq(a);n.reverse&&l.hasClass("selected")?(s.removeClass("selected"),o.hide()):(n.currentIndex=a,s.removeClass("selected"),l.addClass("selected"),o.hide().eq(n.currentIndex).show()),c.attr("inited")||c.attr("inited",1e3).find("input[type=text]").filter("[alt]").inputAlert()}var n=t.extend({reverse:!1,eventType:"click",currentIndex:0,stTabHeader:"> .tabsHeader",stTab:">.tabsHeaderContent>ul",stTabPanel:"> .tabsContent",ajaxClass:"j-ajax",closeClass:"close",prevClass:"tabsLeft",
nextClass:"tabsRight"},e);return this.each(function(){a(t(this))})}})}(jQuery),function(t){t.fn.extend({jresize:function(e){return"string"==typeof e&&"destroy"==e?this.each(function(){var e=this;t("div[class^='resizable']",e).each(function(){t(this).hide()})}):this.each(function(){var e=t(this),a=t(".resizable");t("div[class^='resizable']",e).each(function(){var i=this;t(i).mousedown(function(n){return t.pdialog.switchDialog(e),t.resizeTool.start(a,e,n,t(i).attr("tar")),!1}).show()})})}}),t.resizeTool={start:function(e,a,i,n){t.pdialog.initResize(e,a,n),t.data(e[0],"layer-drag",{options:t.extend(t.pdialog._op,{target:n,dialog:a,stop:t.resizeTool.stop})}),t.layerdrag.start(e[0],i,t.pdialog._op)},stop:function(){var e=t.data(arguments[0],"layer-drag");t.pdialog.resizeDialog(arguments[0],e.options.dialog,e.options.target),t("body").css("cursor",""),t(arguments[0]).hide()}},t.layerdrag={start:function(e,a,i){return t.layerdrag.current||(t.layerdrag.current={el:e,oleft:parseInt(e.style.left)||0,owidth:parseInt(e.style.width)||0,otop:parseInt(e.style.top)||0,oheight:parseInt(e.style.height)||0,ox:a.pageX||a.screenX,oy:a.pageY||a.clientY},t(document).bind("mouseup",t.layerdrag.stop),t(document).bind("mousemove",t.layerdrag.drag)),t.layerdrag.preventEvent(a)},drag:function(e){if(!e)var e=window.event;var a=t.layerdrag.current,i=t.data(a.el,"layer-drag"),n=(e.pageX||e.screenX)-a.ox,r=(e.pageY||e.clientY)-a.oy;if((e.pageY||e.clientY)<=0||(e.pageY||e.clientY)>=t(window).height()-t(".dialogHeader",t(i.options.dialog)).outerHeight())return!1;var s=i.options.target,o=a.owidth,l=a.oheight;return"n"!=s&&"s"!=s&&(o+=s.indexOf("w")>=0?-n:n),o>=t.pdialog._op.minW&&(s.indexOf("w")>=0&&(a.el.style.left=a.oleft+n+"px"),"n"!=s&&"s"!=s&&(a.el.style.width=o+"px")),"w"!=s&&"e"!=s&&(l+=s.indexOf("n")>=0?-r:r),l>=t.pdialog._op.minH&&(s.indexOf("n")>=0&&(a.el.style.top=a.otop+r+"px"),"w"!=s&&"e"!=s&&(a.el.style.height=l+"px")),t.layerdrag.preventEvent(e)},stop:function(e){var a=t.layerdrag.current,i=t.data(a.el,"layer-drag");return t(document).unbind("mousemove",t.layerdrag.drag),t(document).unbind("mouseup",t.layerdrag.stop),i.options.stop&&i.options.stop.apply(a.el,[a.el]),t.layerdrag.current=null,t.layerdrag.preventEvent(e)},preventEvent:function(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1}}}(jQuery),function(t){t.pdialog={_op:{height:300,width:580,minH:40,minW:50,total:20,max:!1,mask:!0,resizable:!1,drawable:!0,maxable:!1,minable:!1,fresh:!0},_current:null,_zIndex:42,getCurrent:function(){return this._current},reload:function(e,a){var i=t.extend({data:{},dialogId:"",callback:null},a),n=i.dialogId&&t("body").data(i.dialogId)||this._current;if(n){e=e||n.data("url");var r=n.find(".dialogContent"),s=r.getPagerForm();s&&t.extend(i.data,s.serializeJson()),t.extend(i.data,e.getParams()),r.ajaxUrl({type:"POST",url:e,data:i.data,callback:function(e){r.find("[layoutH]").layoutH(r),t(".pageContent",n).width(t(n).width()-14),t(":button.close",n).click(function(){return t.pdialog.close(n),!1}),t.isFunction(i.callback)&&i.callback(e)}})}},open:function(e,a,i,n){var r=t.extend({},t.pdialog._op,n),s=t("body").data(a);if(s){if(s.is(":hidden")&&s.show(),r.fresh||e!=t(s).data("url")){s.data("url",e),s.find(".dialogHeader").find("h1").html(i),this.switchDialog(s);var o=s.find(".dialogContent");o.loadUrl(e,{},function(){o.find("[layoutH]").layoutH(o),t(".pageContent",s).width(t(s).width()-14),t("button.close").click(function(){return t.pdialog.close(s),!1})})}}else{t("body").append(DWZ.frag.dialogFrag),s=t(">.dialog:last-child","body"),s.data("id",a),s.data("url",e),n.close&&s.data("close",n.close),n.param&&s.data("param",n.param),t.fn.bgiframe&&s.bgiframe(),s.find(".dialogHeader").find("h1").html(i),t(s).css("zIndex",t.pdialog._zIndex+=2),t("div.shadow").css("zIndex",t.pdialog._zIndex-3).show(),t.pdialog._init(s,n),t(s).click(function(){t.pdialog.switchDialog(s)}),r.resizable&&s.jresize(),r.drawable&&s.dialogDrag(),t("a.close",s).click(function(e){return t.pdialog.close(s),!1}),r.maxable?t("a.maximize",s).show().click(function(e){return t.pdialog.switchDialog(s),t.pdialog.maxsize(s),s.jresize("destroy").dialogDrag("destroy"),!1}):t("a.maximize",s).hide(),t("a.restore",s).click(function(e){return t.pdialog.restore(s),s.jresize().dialogDrag(),!1}),r.minable?t("a.minimize",s).show().click(function(e){return t.pdialog.minimize(s),!1}):t("a.minimize",s).hide(),t("div.dialogHeader a",s).mousedown(function(){return!1}),t("div.dialogHeader",s).dblclick(function(){t("a.restore",s).is(":hidden")?t("a.maximize",s).trigger("click"):t("a.restore",s).trigger("click")}),r.max&&(t.pdialog.maxsize(s),s.jresize("destroy").dialogDrag("destroy")),t("body").data(a,s),t.pdialog._current=s,t.pdialog.attachShadow(s);var o=t(".dialogContent",s);o.loadUrl(e,{},function(){o.find("[layoutH]").layoutH(o),t(".pageContent",s).width(t(s).width()-14),t("button.close").click(function(){return t.pdialog.close(s),!1})})}r.mask?(t(s).css("zIndex",1e3),t("a.minimize",s).hide(),t(s).data("mask",!0),t("#dialogBackground").show()):r.minable&&t.taskBar.addDialog(a,i)},switchDialog:function(e){var a=t(e).css("zIndex");if(t.pdialog.attachShadow(e),t.pdialog._current){var i=t(t.pdialog._current).css("zIndex");t(t.pdialog._current).css("zIndex",a),t(e).css("zIndex",i),t("div.shadow").css("zIndex",i-1),t.pdialog._current=e}t.taskBar.switchTask(e.data("id"))},attachShadow:function(e){var a=t("div.shadow");a.is(":hidden")&&a.show(),a.css({top:parseInt(t(e)[0].style.top)-2,left:parseInt(t(e)[0].style.left)-4,height:parseInt(t(e).height())+8,width:parseInt(t(e).width())+8,zIndex:parseInt(t(e).css("zIndex"))-1}),t(".shadow_c",a).children().andSelf().each(function(){t(this).css("height",t(e).outerHeight()-4)})},_init:function(e,a){var i=t.extend({},this._op,a),n=i.height>i.minH?i.height:i.minH,r=i.width>i.minW?i.width:i.minW;(isNaN(e.height())||e.height()<n)&&(t(e).height(n+"px"),t(".dialogContent",e).height(n-t(".dialogHeader",e).outerHeight()-t(".dialogFooter",e).outerHeight()-6)),(isNaN(e.css("width"))||e.width()<r)&&t(e).width(r+"px");var s=(t(window).height()-e.height())/2;e.css({left:(t(window).width()-e.width())/2,top:s>0?s:0})},initResize:function(e,a,i){t("body").css("cursor",i+"-resize"),e.css({top:t(a).css("top"),left:t(a).css("left"),height:t(a).css("height"),width:t(a).css("width")}),e.show()},repaint:function(e,a){var i=t("div.shadow");"w"!=e&&"e"!=e&&(i.css("height",i.outerHeight()+a.tmove),t(".shadow_c",i).children().andSelf().each(function(){t(this).css("height",t(this).outerHeight()+a.tmove)})),"n"!=e&&"nw"!=e&&"ne"!=e||i.css("top",a.otop-2),!a.owidth||"n"==e&&"s"==e||i.css("width",a.owidth+8),e.indexOf("w")>=0&&i.css("left",a.oleft-4)},resizeTool:function(e,a,i){t("div[class^='resizable']",i).filter(function(){return"w"==t(this).attr("tar")||"e"==t(this).attr("tar")}).each(function(){t(this).css("height",t(this).outerHeight()+a)})},resizeDialog:function(e,a,i){var n=parseInt(e.style.left),r=parseInt(e.style.top),s=parseInt(e.style.height),o=parseInt(e.style.width);if("n"==i||"nw"==i?tmove=parseInt(t(a).css("top"))-r:tmove=s-parseInt(t(a).css("height")),t(a).css({left:n,width:o,top:r,height:s}),t(".dialogContent",a).css("width",o-12+"px"),t(".pageContent",a).css("width",o-14+"px"),"w"!=i&&"e"!=i){var l=t(".dialogContent",a);l.css({height:s-t(".dialogHeader",a).outerHeight()-t(".dialogFooter",a).outerHeight()-6}),l.find("[layoutH]").layoutH(l),t.pdialog.resizeTool(i,tmove,a)}t.pdialog.repaint(i,{oleft:n,otop:r,tmove:tmove,owidth:o}),t(window).trigger(DWZ.eventType.resizeGrid)},close:function(e){"string"==typeof e&&(e=t("body").data(e));var a=e.data("close"),i=!0;if(a&&t.isFunction(a)){var n=e.data("param");if(n&&""!=n?(n=DWZ.jsonEval(n),i=a(n)):i=a(),!i)return}if(t(e).hide(),t("div.shadow").hide(),t(e).data("mask")){var r=!0;t("div.dialog").each(function(){t(this).data("mask")&&t(this).data("id")!=t(e).data("id")&&(r=!1)}),r&&t("#dialogBackground").hide()}else t(e).data("id")&&t.taskBar.closeDialog(t(e).data("id"));t("body").removeData(t(e).data("id")),t(e).trigger(DWZ.eventType.pageClear).remove()},closeCurrent:function(){this.close(t.pdialog._current)},checkTimeout:function(){var e=t(".dialogContent",t.pdialog._current),a=DWZ.jsonEval(e.html());a&&a[DWZ.keys.statusCode]==DWZ.statusCode.timeout&&this.closeCurrent()},maxsize:function(e){t(e).data("original",{top:t(e).css("top"),left:t(e).css("left"),width:t(e).css("width"),height:t(e).css("height")}),t("a.maximize",e).hide(),t("a.restore",e).show();var a=t(window).width(),i=t(window).height()-34;t(e).css({top:"0px",left:"0px",width:a+"px",height:i+"px"}),t.pdialog._resizeContent(e,a,i)},restore:function(e){var a=t(e).data("original"),i=parseInt(a.width),n=parseInt(a.height);t(e).css({top:a.top,left:a.left,width:i,height:n}),t.pdialog._resizeContent(e,i,n),t("a.maximize",e).show(),t("a.restore",e).hide(),t.pdialog.attachShadow(e)},minimize:function(e){t(e).hide(),t("div.shadow").hide();var a=t.taskBar.getTask(t(e).data("id"));t(".resizable").css({top:t(e).css("top"),left:t(e).css("left"),height:t(e).css("height"),width:t(e).css("width")}).show().animate({top:t(window).height()-60,left:a.position().left,width:a.outerWidth(),height:a.outerHeight()},250,function(){t(this).hide(),t.taskBar.inactive(t(e).data("id"))})},_resizeContent:function(e,a,i){var n=t(".dialogContent",e);n.css({width:a-12+"px",height:i-t(".dialogHeader",e).outerHeight()-t(".dialogFooter",e).outerHeight()-6}),n.find("[layoutH]").layoutH(n),t(".pageContent",e).css("width",a-14+"px"),t(window).trigger(DWZ.eventType.resizeGrid)}}}(jQuery),function(t){t.fn.dialogDrag=function(e){return"string"==typeof e&&"destroy"==e?this.each(function(){var e=this;t("div.dialogHeader",e).unbind("mousedown")}):this.each(function(){var e=t(this);t("div.dialogHeader",e).mousedown(function(a){return t.pdialog.switchDialog(e),e.data("task",!0),setTimeout(function(){e.data("task")&&t.dialogDrag.start(e,a)},100),!1}).mouseup(function(t){return e.data("task",!1),!1})})},t.dialogDrag={currId:null,_init:function(e){this.currId=(new Date).getTime();var a=t("#dialogProxy");a.size()||(a=t(DWZ.frag.dialogProxy),t("body").append(a)),t("h1",a).html(t(".dialogHeader h1",e).text())},start:function(e,a){this._init(e);var i=t("#dialogProxy");return i.css({left:e.css("left"),top:e.css("top"),height:e.css("height"),width:e.css("width"),zIndex:parseInt(e.css("zIndex"))+1}).show(),t("div.dialogContent",i).css("height",t("div.dialogContent",e).css("height")),i.data("dialog",e),e.css({left:"-10000px",top:"-10000px"}),t(".shadow").hide(),t(i).jDrag({selector:".dialogHeader",stop:this.stop,event:a}),!1},stop:function(){var e=t(arguments[0]),a=e.data("dialog");t(a).css({left:t(e).css("left"),top:t(e).css("top")}),t.pdialog.attachShadow(a),t(e).hide()}}}(jQuery),function(t){var e={cursor:"move",sortBoxs:"div.sortDrag",replace:!1,items:"> *",selector:"",zIndex:1e3},a={start:function(t,e,a,i){var n=this._createPlaceholder(e),r=e.clone(),s=e.position();return r.data("$sortBox",t).data("op",i).data("$item",e).data("$placeholder",n),r.addClass("sortDragHelper").css({position:"absolute",top:s.top+t.scrollTop(),left:s.left,zIndex:i.zIndex,width:e.width()+"px",height:e.height()+"px"}).jDrag({selector:i.selector,drag:this.drag,stop:this.stop,event:a}),e.before(n).before(r).hide(),!1},drag:function(e,i){var n=t(arguments[0]),r=n.data("$sortBox"),s=n.data("$placeholder"),o=r.find(n.data("op").items).filter(":visible").filter(":not(.sortDragPlaceholder, .sortDragHelper)"),l=n.position(),c=(o.eq(0).position(),a._getOverSortBox(n,i));if(c.length>0&&c[0]!=r[0])s.appendTo(c),n.data("$sortBox",c);else for(var d=0;d<o.length;d++){var h=o.eq(d),u=h.position();if(l.top>u.top+10)h.after(s);else if(l.top<=u.top){h.before(s);break}}},stop:function(){var a=t(arguments[0]),i=a.data("$sortBox"),n=a.data("$item"),r=a.data("$placeholder"),s=r.position();a.animate({top:s.top+i.scrollTop()+"px",left:s.left+"px"},{complete:function(){a.data("op").replace&&($srcBox=n.parents(e.sortBoxs+":first"),$destBox=r.parents(e.sortBoxs+":first"),$srcBox[0]!=$destBox[0]&&($replaceItem=r.next(),$replaceItem.size()>0&&$replaceItem.insertAfter(n))),n.insertAfter(r).show(),r.remove(),a.remove()},duration:300})},_createPlaceholder:function(e){return t("<"+e[0].nodeName+' class="sortDragPlaceholder"/>').css({width:e.outerWidth()+"px",height:e.outerHeight()+"px",marginTop:e.css("marginTop"),marginRight:e.css("marginRight"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft")})},_getOverSortBox:function(a,i){var n=a.position(),r=n.top+a.height()/2,s=n.left+a.width()/2;return t(e.sortBoxs).filter(":visible").filter(function(){var e=t(this),a=e.position(),i=e.height(),n=e.width();return DWZ.isOver(r,s,a.top,a.left,i,n)})}};t.fn.sortDrag=function(i){return this.each(function(){var n=t.extend({},e,i),r=t(this);r.attr("selector")&&(n.selector=r.attr("selector")),r.find(n.items).each(function(e){var i=t(this),s=i;n.selector&&(s=i.find(n.selector).css({cursor:n.cursor})),s.mousedown(function(t){a.start(r,i,t,n),t.preventDefault()})})})}}(jQuery),function(t){t.fn.extend({cssTable:function(e){return this.each(function(){var e=t(this),a=e.find("tbody>tr"),i=e.parent(),n=e.hasClass("nowrap");n||a.hoverClass("hover"),a.each(function(e){var r=t(this);n||e%2!=1||r.addClass("trbg"),r.click(function(){n||(a.filter(".selected").removeClass("selected"),r.addClass("selected"));var e=r.attr("target");e&&(0==t("#"+e,i).size()&&i.prepend('<input id="'+e+'" type="hidden" />'),t("#"+e,i).val(r.attr("rel")))})}),e.find("thead [orderField]").orderBy({asc:e.attr("asc")||"asc",desc:e.attr("desc")||"desc"})})}})}(jQuery),function(t){t.fn.jTable=function(e){return this.each(function(){function a(){t("div.j-resizeGrid").each(function(){var e=t(this).innerWidth();e&&t("div.gridScroller",this).width(e+"px")})}for(var i=t(this),n=i.attr("nowrapTD"),r=i.width(),s=[],o=i.parent().addClass("j-resizeGrid"),l=t(this).attr("layoutH"),c=i.find("thead>tr:last-child").find("th"),d=0,h=c.size();h>d;d++){var u=t(c[d]),f=[],p=u.innerWidth()-100*u.innerWidth()/r-2;f[0]=parseInt(p),f[1]=u.attr("align"),s[s.length]=f}t(this).wrap("<div class='grid'></div>");var g=i.parent().html(i.html()),v=g.find("thead");v.wrap("<div class='gridHeader'><div class='gridThead'><table style='width:"+(r-20)+"px;'></table></div></div>");var m=t(">tr:last-child",v),b=t(">th",m);t("th",v).each(function(){var e=t(this);e.html("<div class='gridCol' title='"+e.text()+"'>"+e.html()+"</div>")}),b.each(function(e){var a=t(this),i=s[e];a.addClass(i[1]).hoverClass("hover").removeAttr("align").removeAttr("width").width(i[0])}).filter("[orderField]").orderBy({asc:i.attr("asc")||"asc",desc:i.attr("desc")||"desc"});var x=g.find(">tbody"),k=l?" layoutH='"+l+"'":"";x.wrap("<div class='gridScroller'"+k+" style='width:"+o.width()+"px;'><div class='gridTbody'><table style='width:"+(r-20)+"px;'></table></div></div>");var y=t(">tr:first-child",x),_=x.find(">tr");_.hoverClass().each(function(){for(var e=t(this),a=t(">td",this),i=0;i<a.size();i++){var r=t(a[i]);"false"!=n&&r.html("<div>"+r.html()+"</div>"),i<s.length&&r.addClass(s[i][1])}e.click(function(){_.filter(".selected").removeClass("selected"),e.addClass("selected");var a=e.attr("target");a&&(0==t("#"+a,g).size()&&g.prepend('<input id="'+a+'" type="hidden" />'),t("#"+a,g).val(e.attr("rel")))})}),t(">td",y).each(function(e){e<s.length&&t(this).width(s[e][0])}),g.append("<div class='resizeMarker' style='height:300px; left:57px;display:none;'></div><div class='resizeProxy' style='height:300px; left:377px;display:none;'></div>");var w=t(".gridScroller",g);w.scroll(function(e){var a=t(".gridThead",g);if(w.scrollLeft()>0){a.css("position","relative");var i=w.scrollLeft();a.css("left",w.cssv("left")-i)}return 0==w.scrollLeft()&&(a.css("position","relative"),a.css("left","0px")),!1}),t(">tr",v).each(function(){t(">th",this).each(function(a){var i=this,n=t(this);n.mouseover(function(a){var r=t.jTableTool.getOffset(i,a).offsetX;return n.outerWidth()-r<5?n.css("cursor","col-resize").mousedown(function(a){t(".resizeProxy",g).show().css({left:t.jTableTool.getRight(i)-t(".gridScroller",g).scrollLeft(),top:t.jTableTool.getTop(i),height:t.jTableTool.getHeight(i,g),cursor:"col-resize"}),t(".resizeMarker",g).show().css({left:t.jTableTool.getLeft(i)+1-t(".gridScroller",g).scrollLeft(),top:t.jTableTool.getTop(i),height:t.jTableTool.getHeight(i,g)}),t(".resizeProxy",g).jDrag(t.extend(e,{scop:!0,cellMinW:20,relObj:t(".resizeMarker",g)[0],move:"horizontal",event:a,stop:function(){var e=t(".resizeProxy",g).position().left,a=t(".resizeMarker",g).position().left,i=e-a-n.outerWidth()-9,r=(t.jTableTool.getColspan(n),t.jTableTool.getCellNum(n)),s=n.width(),o=n.width()+i,l=t(">td",y).eq(r-1);n.width(o+"px"),l.width(o+"px");var c=t(v).parent();c.width(c.width()-s+o+"px");var d=t(x).parent();d.width(d.width()-s+o+"px"),t(".resizeMarker,.resizeProxy",g).hide()}}))}):(n.css("cursor",n.attr("orderField")?"pointer":"default"),n.unbind("mousedown")),!1})})}),t(window).unbind(DWZ.eventType.resizeGrid).bind("resizeGrid",a)})},t.jTableTool={getLeft:function(e){var a=0;return t(e).prevAll().each(function(){a+=t(this).outerWidth()}),a-1},getRight:function(e){var a=0;return t(e).prevAll().andSelf().each(function(){a+=t(this).outerWidth()}),a-1},getTop:function(e){var a=0;return t(e).parent().prevAll().each(function(){a+=t(this).outerHeight()}),a},getHeight:function(e,a){var i=0,n=t(e).parent();return n.nextAll().andSelf().each(function(){i+=t(this).outerHeight()}),t(".gridTbody",a).children().each(function(){i+=t(this).outerHeight()}),i},getCellNum:function(e){return t(e).prevAll().andSelf().size()},getColspan:function(e){return t(e).attr("colspan")||1},getStart:function(e){var a=1;return t(e).prevAll().each(function(){a+=parseInt(t(this).attr("colspan")||1)}),a},getPageCoord:function(t){for(var e={x:0,y:0};t;)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;return e},getOffset:function(e,a){if(t.browser.msie){var i=t(e).offset(),n={offsetX:a.pageX||a.screenX,offsetY:a.pageY||a.screenY},r={offsetX:n.offsetX-i.left,offsetY:n.offsetY-i.top};return r}var s=a.target;void 0==s.offsetLeft&&(s=s.parentNode);var o=t.jTableTool.getPageCoord(s),l={x:window.pageXOffset+a.clientX,y:window.pageYOffset+a.clientY},r={offsetX:l.x-o.x,offsetY:l.y-o.y};return r}}}(jQuery),function(t){t.fn.extend({jTask:function(e){return this.each(function(){var e=t(this),a=e.attr("id");e.click(function(i){var n=t("body").data(a);return e.hasClass("selected")?t("a.minimize",n).trigger("click"):n.is(":hidden")?t.taskBar.restoreDialog(n):t(n).trigger("click"),t.taskBar.scrollCurrent(t(this)),!1}),t("div.close",e).click(function(e){return t.pdialog.close(a),!1}).hoverClass("closeHover"),e.hoverClass("hover")})}}),t.taskBar={_taskBar:null,_taskBox:null,_prevBut:null,_nextBut:null,_op:{id:"taskbar",taskBox:"div.taskbarContent",prevBut:".taskbarLeft",prevDis:"taskbarLeftDisabled",nextBut:".taskbarRight",nextDis:"taskbarRightDisabled",selected:"selected",boxMargin:"taskbarMargin"},init:function(e){var a=this;t.extend(this._op,e),this._taskBar=t("#"+this._op.id),0==this._taskBar.size()&&(this._taskBar=t(DWZ.frag.taskbar).appendTo(t("#layout")),this._taskBar.find(".taskbarLeft").hoverClass("taskbarLeftHover"),this._taskBar.find(".taskbarRight").hoverClass("taskbarRightHover")),this._taskBox=this._taskBar.find(this._op.taskBox),this._taskList=this._taskBox.find(">ul"),this._prevBut=this._taskBar.find(this._op.prevBut),this._nextBut=this._taskBar.find(this._op.nextBut),this._prevBut.click(function(t){a.scrollLeft()}),this._nextBut.click(function(t){a.scrollRight()}),this._contextmenu(this._taskBox)},_contextmenu:function(e){t(e).contextMenu("dialogCM",{bindings:{closeCurrent:function(e,a){var i=e.isTag("li")?e:t.taskBar._getCurrent();t("div.close",i).trigger("click")},closeOther:function(e,a){var i=e.isTag("li")?"#"+e.attr("id"):".selected",n=t.taskBar._taskList.find(">li:not(:"+i+")");n.each(function(e){t("div.close",n[e]).trigger("click")})},closeAll:function(e,a){var i=t.taskBar._getTasks();i.each(function(e){t("div.close",i[e]).trigger("click")})}},ctrSub:function(e,a){var i=a.find("[rel='closeCurrent']"),n=a.find("[rel='closeOther']");t.taskBar._getCurrent()[0]?1==t.taskBar._getTasks().size()&&n.addClass("disabled"):(i.addClass("disabled"),n.addClass("disabled"))}})},_scrollCurrent:function(){var e=this._tasksW(this._getTasks());if(e>this._getTaskBarW()){var a=this,i=t(">li:last-child",this._taskList),n=this._getTaskBarW()-i.position().left-i.outerWidth(!0);this._taskList.animate({left:n+"px"},200,function(){a._ctrlScrollBut()})}else this._ctrlScrollBut()},_getTaskBarW:function(){return this._taskBox.width()-(this._prevBut.is(":hidden")?this._prevBut.width()+2:0)-(this._nextBut.is(":hidden")?this._nextBut.width()+2:0)},_scrollTask:function(t){var e=this;if(t.position().left+this._getLeft()+t.outerWidth()>this._getBarWidth()){var a=this._getTaskBarW()-t.position().left-t.outerWidth(!0)-2;this._taskList.animate({left:a+"px"},200,function(){e._ctrlScrollBut()})}else if(t.position().left+this._getLeft()<0){var a=this._getLeft()-(t.position().left+this._getLeft());this._taskList.animate({left:a+"px"},200,function(){e._ctrlScrollBut()})}},_ctrlScrollBut:function(){var t=this._tasksW(this._getTasks());this._getTaskBarW()>t?(this._taskBox.removeClass(this._op.boxMargin),this._nextBut.hide(),this._prevBut.hide(),this._getTasks().eq(0)[0]&&this._scrollTask(this._getTasks().eq(0))):(this._taskBox.addClass(this._op.boxMargin),this._nextBut.show().removeClass(this._op.nextDis),this._prevBut.show().removeClass(this._op.prevDis),this._getLeft()>=0&&this._prevBut.addClass(this._op.prevDis),this._getLeft()<=this._getTaskBarW()-t&&this._nextBut.addClass(this._op.nextDis))},_getLeft:function(){return this._taskList.position().left},_visibleStart:function(){for(var t=this._getLeft(),e=this._getTasks(),a=0;a<e.size();a++)if(e.eq(a).position().left+e.eq(a).outerWidth(!0)+t>=0)return e.eq(a);return e.eq(0)},_visibleEnd:function(){for(var t=this._getLeft(),e=this._getTasks(),a=0;a<e.size();a++)if(e.eq(a).position().left+e.eq(a).outerWidth(!0)+t>this._getBarWidth())return e.eq(a);return e.eq(e.size()-1)},_getTasks:function(){return this._taskList.find(">li")},_tasksW:function(e){var a=0;return e.each(function(){a+=t(this).outerWidth(!0)}),a},_getBarWidth:function(){return this._taskBar.innerWidth()},addDialog:function(e,a){this.show();var i=t("#"+e,this._taskList);if(i[0])t(">div>span",i).text(a);else{var n='<li id="#taskid#"><div class="taskbutton"><span>#title#</span></div><div class="close">Close</div></li>';this._taskList.append(n.replace("#taskid#",e).replace("#title#",a)),i=t("#"+e,this._taskList),i.jTask()}this._contextmenu(i),this.switchTask(e),this._scrollTask(i)},closeDialog:function(e){var a="string"==typeof e?t("#"+e,this._taskList):e;a.remove(),0==this._getTasks().size()&&this.hide(),this._scrollCurrent()},restoreDialog:function(e){var a="string"==typeof e?t("body").data(e):e,i="string"==typeof e?e:a.data("id"),n=t.taskBar.getTask(i);t(".resizable").css({top:t(window).height()-60,left:t(n).position().left,height:t(n).outerHeight(),width:t(n).outerWidth()}).show().animate({top:t(a).css("top"),left:t(a).css("left"),width:t(a).css("width"),height:t(a).css("height")},250,function(){t(this).hide(),t(a).show(),t.pdialog.attachShadow(a)}),t.taskBar.switchTask(i)},inactive:function(e){t("#"+e,this._taskList).removeClass("selected")},scrollLeft:function(){var t=this._visibleStart();this._scrollTask(t)},scrollRight:function(){var t=this._visibleEnd();this._scrollTask(t)},scrollCurrent:function(t){this._scrollTask(t)},switchTask:function(t){this._getCurrent().removeClass("selected"),this.getTask(t).addClass("selected")},_getCurrent:function(){return this._taskList.find(">.selected")},getTask:function(e){return t("#"+e,this._taskList)},show:function(){this._taskBar.is(":hidden")&&(this._taskBar.css("top",t(window).height()-34+this._taskBar.outerHeight()).show(),this._taskBar.animate({top:t(window).height()-this._taskBar.outerHeight()},500))},hide:function(){this._taskBar.animate({top:t(window).height()-29+this._taskBar.outerHeight(!0)},500,function(){t.taskBar._taskBar.hide()})}}}(jQuery),$.fn.extend({ajaxTodo:function(){return this.each(function(){var t=$(this);t.click(function(e){if(t.hasClass("disabled"))return!1;var a=decodeURI(t.attr("href")).replaceTmById($(e.target).unitBox());if(DWZ.debug(a),!a.isFinishedTm())return alertMsg.error(t.attr("warn")||DWZ.msg("alertSelectMsg")),!1;var i=t.attr("title");i?alertMsg.confirm(i,{okCall:function(){ajaxTodo(a,t.attr("callback"))}}):ajaxTodo(a,t.attr("callback")),e.preventDefault()})})},selectedTodo:function(){function _getIds(t,e){var a="";return t.find("input:checked").filter("[name='"+e+"']").each(function(t){var e=$(this).val();a+=0==t?e:","+e}),a}return this.each(function(){var $this=$(this),selectedIds=$this.attr("rel")||"ids",postType=$this.attr("postType")||"map";$this.click(function(){function _doPost(){$.ajax({type:"POST",url:$this.attr("href"),dataType:"json",cache:!1,data:function(){if("map"==postType)return $.map(ids.split(","),function(t){return{name:selectedIds,value:t}});var t={};return t[selectedIds]=ids,t}(),success:_callback,error:DWZ.ajaxError})}var ids=_getIds($this.unitBox(),selectedIds);if(!ids)return alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg")),!1;var _callback=$this.attr("callback")||allAjaxDone;$.isFunction(_callback)||(_callback=eval("("+_callback+")"));var title=$this.attr("title");return title?alertMsg.confirm(title,{okCall:_doPost}):_doPost(),!1})})},dwzExport:function(){function t(t){var e=t.getPagerForm(),a=t.attr("href");window.location=a+(-1==a.indexOf("?")?"?":"&")+e.serialize()}return this.each(function(){var e=$(this);e.click(function(a){var i=e.attr("title");i?alertMsg.confirm(i,{okCall:function(){t(e)}}):t(e),a.preventDefault()})})}}),function(t){t.fn.extend({pagination:function(a){function i(e,a){e.bind("click",{pageNum:a},function(e){var a=t(this).getPagerForm().get(0);a[DWZ.pageInfo.pageNum].value=e.data.pageNum,ajaxSearch(a),e.preventDefault()})}var n={first$:"li.j-first",prev$:"li.j-prev",next$:"li.j-next",last$:"li.j-last",nums$:"li.j-num>a",jumpto$:"li.jumpto",pageNumFrag:'<li class="#liClass#"><a href="javascript:;">#pageNum#</a></li>'};return this.each(function(){for(var r=t(this),s=new e(a),o=s.getInterval(),l="",c=o.start;c<o.end;c++)l+=n.pageNumFrag.replaceAll("#pageNum#",c).replaceAll("#liClass#",c==s.getCurrentPage()?"selected j-num":"j-num");r.html(DWZ.frag.pagination.replaceAll("#pageNumFrag#",l).replaceAll("#currentPage#",s.getCurrentPage())).find("li").hoverClass();var d=r.find(n.first$),h=r.find(n.prev$),u=r.find(n.next$),f=r.find(n.last$);s.hasPrev()?(d.add(h).find(">span").hide(),i(h,s.getCurrentPage()-1),i(d,1)):d.add(h).addClass("disabled").find(">a").hide(),s.hasNext()?(u.add(f).find(">span").hide(),i(u,s.getCurrentPage()+1),i(f,s.numPages())):u.add(f).addClass("disabled").find(">a").hide(),r.find(n.nums$).each(function(e){i(t(this),e+o.start)}),r.find(n.jumpto$).each(function(){var e=t(this),a=e.find(":text"),i=e.find(":button");i.click(function(t){var i=a.val();if(i&&i.isPositiveInteger()){var n=e.getPagerForm().get(0);n[DWZ.pageInfo.pageNum].value=i,ajaxSearch(n)}}),a.keyup(function(t){t.keyCode==DWZ.keyCode.ENTER&&i.click()})})})},orderBy:function(e){var a=t.extend({asc:"asc",desc:"desc"},e);return this.each(function(){var e=t(this).css({cursor:"pointer"}).click(function(){var t=e.attr(DWZ.pageInfo.orderField),i=e.hasClass(a.asc)?a.desc:a.asc,n=e.getPagerForm().get(0);n[DWZ.pageInfo.orderField].value=t,n[DWZ.pageInfo.orderDirection].value=i,ajaxSearch(n)})})}});var e=function(e){this.opts=t.extend({totalCount:0,numPerPage:10,pageNumShown:10,currentPage:1,callback:function(){return!1}},e)};t.extend(e.prototype,{numPages:function(){return Math.ceil(this.opts.totalCount/this.opts.numPerPage)},getInterval:function(){var t=Math.ceil(this.opts.pageNumShown/2),e=this.numPages(),a=e-this.opts.pageNumShown,i=this.getCurrentPage()>t?Math.max(Math.min(this.getCurrentPage()-t,a),0):0,n=this.getCurrentPage()>t?Math.min(this.getCurrentPage()+t,e):Math.min(this.opts.pageNumShown,e);return{start:i+1,end:n+1}},getCurrentPage:function(){var t=parseInt(this.opts.currentPage);return isNaN(t)?1:t},hasPrev:function(){return this.getCurrentPage()>1},hasNext:function(){return this.getCurrentPage()<this.numPages()}})}(jQuery),function($){var _lookup={currentGroup:"",suffix:"",$target:null,pk:"id"},_util={_lookupPrefix:function(t){var e=_lookup.currentGroup?".":"";return _lookup.currentGroup+e+t+_lookup.suffix},lookupPk:function(t){return this._lookupPrefix(t)},lookupField:function(t){return this.lookupPk(t)}};$.extend({lookupBack:function(t){var e=_lookup.$target.unitBox();e.find(":input").each(function(){var e=$(this),a=e.attr("name");for(var i in t){var n=_lookup.pk==i?_util.lookupPk(i):_util.lookupField(i);if(n==a){e.val(t[i]);break}}}),$.pdialog.closeCurrent()}}),$.fn.extend({lookup:function(){return this.each(function(){var $this=$(this),w=$this.attr("width")||"M",h=$this.attr("height")||"M",options={mask:!0,width:DWZ.dialogWidth[w]||w,height:DWZ.dialogHeight[h]||h,maxable:eval($this.attr("maxable")||"true"),resizable:eval($this.attr("resizable")||"true")};$this.click(function(t){_lookup=$.extend(_lookup,{currentGroup:$this.attr("lookupGroup")||"",suffix:$this.attr("suffix")||"",$target:$this,pk:$this.attr("lookupPk")||"id"});var e=unescape($this.attr("href")).replaceTmById($(t.target).unitBox());return e.isFinishedTm()?($.pdialog.open(e,"_blank",$this.attr("title")||$this.text(),options),!1):(alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg")),!1)})})},multLookup:function(){return this.each(function(){var t=$(this),e={};t.click(function(a){var i=t.unitBox();return i.find("[name='"+t.attr("multLookup")+"']").filter(":checked").each(function(){var t=DWZ.jsonEval($(this).val());for(var a in t){var i=e[a]?e[a]+",":"";e[a]=i+t[a]}}),$.isEmptyObject(e)?(alertMsg.error(t.attr("warn")||DWZ.msg("alertSelectMsg")),!1):void $.lookupBack(e)})})}})}(jQuery),function(t){var e={currentGroup:"",suffix:"",$target:null,pk:"id"},a={_lookupPrefix:function(t){var a=e.currentGroup?".":"";return e.currentGroup+a+t+e.suffix},lookupPk:function(t){return this._lookupPrefix(t)},lookupField:function(t){return this.lookupPk(t)}};t.extend({suggestBack:function(i){var n=e.$target.unitBox();n.find(":input").each(function(){var n=t(this),r=n.attr("name");for(var s in i){var o=e.pk==s?a.lookupPk(s):a.lookupField(s);if(o==r){n.val(i[s]);break}}})}}),t.fn.extend({suggest:function(){var i={suggest$:"#suggest",suggestShadow$:"#suggestShadow"},n=-1;return this.each(function(){function r(n){var r=l.offset(),d=r.top+this.offsetHeight,h=t(i.suggest$);0==h.size()&&(h=t('<div id="suggest"></div>').appendTo(t("body"))),h.css({left:r.left+"px",top:d+"px"}).show(),e=t.extend(e,{currentGroup:l.attr("lookupGroup")||"",suffix:l.attr("suffix")||"",$target:l,pk:l.attr("lookupPk")||"id"});var u=unescape(l.attr("suggestUrl")).replaceTmById(t(n.target).unitBox());if(!u.isFinishedTm())return alertMsg.error(l.attr("warn")||DWZ.msg("alertSelectMsg")),!1;var f={};return f[l.attr("postField")||"inputValue"]=l.val(),t.ajax({global:!1,type:"POST",dataType:"json",url:u,cache:!1,data:f,success:function(i){if(i){var r="";t.each(i,function(t){for(var e="",a="",t=0;t<c.length;t++){var i=this[c[t]];i&&(a&&(a+="-"),a+=i)}for(var n in this)e&&(e+=","),e+=n+":'"+this[n]+"'";r+='<li lookupAttrs="'+e+'">'+a+"</li>"});var o=h.html("<ul>"+r+"</ul>").find("li");if(o.hoverClass("selected").click(function(){s(t(this))}),1==o.size()&&n.keyCode!=DWZ.keyCode.BACKSPACE)s(o.eq(0));else if(0==o.size()){for(var l="",d=0;d<c.length&&a.lookupField(c[d])!=n.target.name;d++)l&&(l+=","),l+=c[d]+":''";l="{"+e.pk+":'',"+l+"}",t.suggestBack(DWZ.jsonEval(l))}}},error:function(){h.html("")}}),t(document).bind("click",o),!1}function s(e){var a="{"+e.attr("lookupAttrs")+"}";t.suggestBack(DWZ.jsonEval(a));
}function o(){t(i.suggest$).html("").hide(),n=-1,t(document).unbind("click",o)}var l=t(this).attr("autocomplete","off").keydown(function(e){return e.keyCode==DWZ.keyCode.ENTER&&t(i.suggest$).is(":visible")?!1:void 0}),c=l.attr("suggestFields").split(",");l.focus(r).click(!1).keyup(function(e){var a=t(i.suggest$).find("li");switch(e.keyCode){case DWZ.keyCode.ESC:case DWZ.keyCode.TAB:case DWZ.keyCode.SHIFT:case DWZ.keyCode.HOME:case DWZ.keyCode.END:case DWZ.keyCode.LEFT:case DWZ.keyCode.RIGHT:break;case DWZ.keyCode.ENTER:o();break;case DWZ.keyCode.DOWN:n>=a.size()-1?n=-1:n++;break;case DWZ.keyCode.UP:0>n?n=a.size()-1:n--;break;default:r(e)}if(a.removeClass("selected"),n>=0){var l=a.eq(n).addClass("selected");s(l)}})})}})}(jQuery),function(t){t.fn.extend({masterSlave:function(){function e(e){e.find(">tr").each(function(e){t(':input, a.btn, span:not([class*="error"])',this).each(function(){var a=t(this),i=a.val();i&&i.indexOf("#index#")>=0&&a.val(i.replace("#index#",e+1)),a.is("span")&&("index"==a.attr("type")?a.text(a.text().replace(/^[0-9]+$/,e+1).replace("#index#",e+1)):a.text(a.text().replace("#index#",e+1))),t.each(this.attributes,function(t,i){"type"!=i.name&&"value"!=i.name&&a.attr(i.name,i.value.replaceSuffix(e))})})})}function a(e){var a="",i="";e.name.endsWith("[#index#]")?i="[#index#]":e.name.endsWith("[]")&&(i="[]");var n=i?' suffix="'+i+'" ':"",r="";if(e.fieldAttrs){var s=DWZ.jsonEval(e.fieldAttrs);for(var o in s)r+=o+'="'+s[o]+'"'}switch(e.type){case"del":a='<a href="javascript:;" style="font-size: 14px;" class="fa-remove red'+e.fieldClass+'" title="删除条目"></a>';break;case"lookup":var l="";e.suggestFields&&(l='autocomplete="off" lookupGroup="'+e.lookupGroup+'"'+n+' suggestUrl="'+e.suggestUrl+'" suggestFields="'+e.suggestFields+'" postField="'+e.postField+'"'),a='<input type="hidden" name="'+e.lookupGroup+"."+e.lookupPk+i+'"/><input type="text" name="'+e.name+'"'+l+' lookupPk="'+e.lookupPk+'" size="'+e.size+'" class="'+e.fieldClass+'"/><a class="btn fa-search-plus" href="'+e.lookupUrl+'" lookupGroup="'+e.lookupGroup+'" '+l+' lookupPk="'+e.lookupPk+'" title="查找带回">查找带回</a>';break;case"attach":a='<input type="hidden" name="'+e.lookupGroup+"."+e.lookupPk+i+'"/><input type="text" name="'+e.name+'" size="'+e.size+'" readonly="readonly" class="'+e.fieldClass+'"/><a class="btn fa-cloud-upload" href="'+e.lookupUrl+'" lookupGroup="'+e.lookupGroup+'" '+n+' lookupPk="'+e.lookupPk+'" width="SS" height="S" title="上传文件">上传文件</a>';break;case"enum":t.ajax({type:"POST",dataType:"html",async:!1,url:e.enumUrl,data:{inputName:e.name},success:function(t){a=t}});break;case"date":a='<input type="text" name="'+e.name+'" value="'+e.defaultVal+'" class="date '+e.fieldClass+'" dateFmt="'+e.patternDate+'" size="'+e.size+'" '+r+"/>";break;case"checkbox":a='<input type="checkbox" name="'+e.name+'" value="'+e.defaultVal+'" size="'+e.size+'" class="'+e.fieldClass+'" '+r+"/>";break;case"span":a='<span class="'+e.fieldClass+'">'+e.defaultVal+"</span>";break;case"index":a='<span type="index">#index#</span>';break;default:a='<input type="'+e.type+'" name="'+e.name+'" value="'+e.defaultVal+'" size="'+e.size+'" class="'+e.fieldClass+'" '+r+"/>"}return e.hiddenName&&(a+='<input type="hidden" name="'+e.hiddenName+'" value="'+e.hiddenVal+'" />'),'<td align="'+e.align+'">'+a+"</td>"}function i(e){var i="";return t(e).each(function(){i+=a(this)}),'<tr class="unitBox">'+i+"</tr>"}return this.each(function(){var a=t(this).css("clear","both"),n=a.find("tbody"),r=[];a.find("tr:first th[type]").each(function(e){var a=t(this),i={type:a.attr("type")||"text",patternDate:a.attr("dateFmt")||"yyyy-MM-dd",name:a.attr("name")||"",defaultVal:a.attr("defaultVal")||"",hiddenName:a.attr("hiddenName")||"",hiddenVal:a.attr("hiddenVal")||"",size:a.attr("size")||"12",align:a.attr("align")||"left",enumUrl:a.attr("enumUrl")||"",lookupGroup:a.attr("lookupGroup")||"",lookupUrl:a.attr("lookupUrl")||"",lookupPk:a.attr("lookupPk")||"id",suggestUrl:a.attr("suggestUrl"),suggestFields:a.attr("suggestFields"),postField:a.attr("postField")||"",fieldClass:a.attr("fieldClass")||"",fieldAttrs:a.attr("fieldAttrs")||""};r.push(i)}),n.find("a.red").click(function(){function a(){t.ajax({type:"POST",dataType:"json",url:i.attr("href"),cache:!1,success:function(){i.parents("tr:first").remove(),e(n)},error:DWZ.ajaxError})}var i=t(this);i.is("[href^=javascript:]")?(i.parents("tr:first").remove(),e(n)):i.attr("title")?alertMsg.confirm(i.attr("title"),{okCall:a}):a()});var s=a.attr("addButton")||"新增条目",o=t('<a href="javascript:;" class="button"><span class="fa-plus">'+s+"</span></a>");o.insertBefore(a),"hide"===s&&o.css("display","none");var l="";o.click(function(){l||(l=i(r));for(var a=1,s=0;a>s;s++){var o=t(l);o.appendTo(n).initUI().find("a.red").click(function(){t(this).parents("tr:first").remove(),e(n)})}e(n)})})}})}(jQuery),function(t){t.setRegional("datepicker",{dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),t.fn.datepicker=function(a){function i(e){var a=t(o.tmBox$);a.removeClass("hh").removeClass("mm").removeClass("ss"),e&&(a.addClass(e),t(o.tmInputs$).removeClass("slt").filter("."+e).addClass("slt"))}function n(e,a){t(o.tmBox$).find("."+a+" li").each(function(){var a=t(this);a.click(function(){e.val(a.text())})})}function r(t){return t.keyCode>=48&&t.keyCode<=57||t.keyCode==DWZ.keyCode.DELETE||t.keyCode==DWZ.keyCode.BACKSPACE?void 0:!1}function s(t,e){var a=parseInt(t.val()),i=parseInt(t.attr("start"))||0,n=parseInt(t.attr("end")),r=parseInt(t.attr("step")||1);1==e?n-r>=a&&t.val(a+r):-1==e?a>=i+r&&t.val(a-r):a>n?t.val(n):i>a&&t.val(i)}var o={box$:"#calendar",year$:"#calendar [name=year]",month$:"#calendar [name=month]",tmInputs$:"#calendar .time :text",hour$:"#calendar .time .hh",minute$:"#calendar .time .mm",second$:"#calendar .time .ss",tmBox$:"#calendar .tm",tmUp$:"#calendar .time .up",tmDown$:"#calendar .time .down",close$:"#calendar .close",calIcon$:"a.btn.fa-calendar",main$:"#calendar .main",days$:"#calendar .days",dayNames$:"#calendar .dayNames",clearBut$:"#calendar .clearBut",okBut$:"#calendar .okBut"};return this.each(function(){function l(e){var a=e.getDateWrap(),l=e.getMinDate(),h=e.getMaxDate(),u=new Date(a.year,a.month-1,1),f=u.getDay(),p="";if(f>0){u.setMonth(u.getMonth()-1);for(var g=e.getDateWrap(u),v=g.days-f+1;v<=g.days;v++){var m=new Date(a.year,a.month-2,v),b=m>=l&&h>=m?"":"disabled";p+='<dd class="other '+b+'" chMonth="-1" day="'+v+'">'+v+"</dd>"}}for(var v=1;v<=a.days;v++){var m=new Date(a.year,a.month-1,v),b=m>=l&&h>=m?"":"disabled";p+=v==a.day?'<dd class="slt '+b+'" day="'+v+'">'+v+"</dd>":'<dd class="'+b+'" day="'+v+'">'+v+"</dd>"}for(var v=1;v<=42-f-a.days;v++){var m=new Date(a.year,a.month,v),b=m>=l&&h>=m?"":"disabled";p+='<dd class="other '+b+'" chMonth="1" day="'+v+'">'+v+"</dd>"}var x=t(o.days$).html(p).find("dd");if(x.not(".disabled").click(function(){var a=t(this);e.hasTime()?(x.removeClass("slt"),a.addClass("slt")):(d.val(e.formatDate(e.changeDay(a.attr("day"),a.attr("chMonth")))),c())}),e.hasDate()||t(o.main$).addClass("nodate"),e.hasTime()){t("#calendar .time").show();var k=t(o.hour$).val(a.hour).focus(function(){i("hh")}),y=parseInt(a.minute/e.opts.mmStep)*e.opts.mmStep,_=t(o.minute$).val(y).attr("step",e.opts.mmStep).focus(function(){i("mm")}),w=t(o.second$).val(e.hasSecond()?a.second:0).attr("step",e.opts.ssStep).focus(function(){i("ss")});k.add(_).add(w).click(function(){return!1}),n(k,"hh"),n(_,"mm"),n(w,"ss"),t(o.box$).click(function(){i()});var $=t(o.tmInputs$);$.keydown(r).each(function(){var e=t(this);e.keyup(function(){s(e,0)})}),t(o.tmUp$).click(function(){$.filter(".slt").each(function(){s(t(this),1)})}),t(o.tmDown$).click(function(){$.filter(".slt").each(function(){s(t(this),-1)})}),e.hasHour()||k.attr("disabled",!0),e.hasMinute()||_.attr("disabled",!0),e.hasSecond()||w.attr("disabled",!0)}}function c(){t(o.box$).remove(),t(document).unbind("click",c)}var d=t(this);new e(d.val(),a);d.click(function(i){c();var n=new e(d.val(),a),r=d.offset(),s=r.top+this.offsetHeight;t(DWZ.frag.calendarFrag).appendTo("body").css({left:r.left+"px",top:s+"px"}).show().click(function(t){t.stopPropagation()}),t.fn.bgiframe&&t(o.box$).bgiframe();var h="";t.each(t.regional.datepicker.dayNames,function(t,e){h+="<dt>"+e+"</dt>"}),t(o.dayNames$).html(h);var u=n.getDateWrap(),f=t(o.year$),p=n.getMinDate().getFullYear(),g=n.getMaxDate().getFullYear();for(y=p;y<=g;y++)f.append('<option value="'+y+'"'+(u.year==y?'selected="selected"':"")+">"+y+"</option>");var v=t(o.month$);t.each(t.regional.datepicker.monthNames,function(t,e){var a=t+1;v.append('<option value="'+a+'"'+(u.month==a?'selected="selected"':"")+">"+e+"</option>")}),l(n),f.add(v).change(function(){n.changeDate(f.val(),v.val()),l(n)});var m=t(o.box$).outerHeight(!0);return s>m&&s>t(window).height()-m&&t(o.box$).css("top",r.top-m),t(o.close$).click(function(){c()}),t(o.clearBut$).click(function(){d.val(""),c()}),t(o.okBut$).click(function(){var e=t(o.days$).find("dd.slt");if(e.hasClass("disabled"))return!1;var a=n.changeDay(e.attr("day"),e.attr("chMonth"));n.hasTime()&&(a.setHours(parseInt(t(o.hour$).val())),a.setMinutes(parseInt(t(o.minute$).val())),a.setSeconds(parseInt(t(o.second$).val()))),d.val(n.formatDate(a)),c()}),t(document).bind("click",c),!1}),d.parent().find(o.calIcon$).click(function(){return d.trigger("click"),!1})})};var e=function(e,a){this.opts=t.extend({pattern:"yyyy-MM-dd",minDate:"1900-01-01",maxDate:"2099-12-31",mmStep:1,ssStep:1},a);var i=new Date;this.opts.minDate=i.formatDateTm(this.opts.minDate),this.opts.maxDate=i.formatDateTm(this.opts.maxDate),this.sDate=e.trim()};t.extend(e.prototype,{get:function(t){return this.opts[t]},_getDays:function(t,e){return 2==e?t%4||!(t%100)&&t%400?28:29:/4|6|9|11/.test(e)?30:31},_minMaxDate:function(t){var e=t.split("-").length-1,a="y-M-d";return 1==e?a="y-M":0==e&&(a="y"),t.parseDate(a)},getMinDate:function(){return this._minMaxDate(this.opts.minDate)},getMaxDate:function(){var t=this.opts.maxDate,e=t.split("-").length-1,a=this._minMaxDate(t);if(2>e){var i=this._getDays(a.getFullYear(),a.getMonth()+1);a.setDate(i),0==e&&a.setMonth(11)}return a},getDateWrap:function(t){t||(t=this.parseDate(this.sDate)||new Date);var e=t.getFullYear(),a=t.getMonth()+1,i=this._getDays(e,a);return{year:e,month:a,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),days:i,date:t}},changeDate:function(t,e,a){var i=new Date(t,e-1,a||1);return this.sDate=this.formatDate(i),i},changeDay:function(t,e){e||(e=0);var a=this.getDateWrap();return this.changeDate(a.year,a.month+parseInt(e),t)},parseDate:function(t){return t?t.parseDate(this.opts.pattern):null},formatDate:function(t){return t.formatDate(this.opts.pattern)},hasHour:function(){return-1!=this.opts.pattern.indexOf("H")},hasMinute:function(){return-1!=this.opts.pattern.indexOf("m")},hasSecond:function(){return-1!=this.opts.pattern.indexOf("s")},hasTime:function(){return this.hasHour()||this.hasMinute()||this.hasSecond()},hasDate:function(){for(var t=["y","M","d","E"],e=0;e<t.length;e++)if(-1!=this.opts.pattern.indexOf(t[e]))return!0;return!1}})}(jQuery),function(t){t.extend(t.fn,{jBlindUp:function(e){var a=t.extend({duration:500,easing:"swing",call:function(){}},e);return this.each(function(){var e=t(this);t(this).animate({height:0},{step:function(){},duration:a.duration,easing:a.easing,complete:function(){e.css({display:"none"}),a.call()}})})},jBlindDown:function(e){var a=t.extend({to:0,duration:500,easing:"swing",call:function(){}},e);return this.each(function(){var e=t(this),i=a.to>0?a.to:t.effect.getDimensions(e[0]).height;e.animate({height:i},{step:function(){},duration:a.duration,easing:a.easing,complete:function(){e.css({display:""}),a.call()}})})},jSlideUp:function(e){var a=t.extend({to:0,duration:500,easing:"swing",call:function(){}},e);return this.each(function(){var e=t(this);e.wrapInner("<div></div>");var i=a.to>0?a.to:t.effect.getDimensions(t(">div",e)[0]).height;e.css({overflow:"visible",position:"relative"}),t(">div",e).css({position:"relative"}).animate({top:-i},{easing:a.easing,duration:a.duration,complete:function(){e.html(t(this).html())}})})},jSlideDown:function(e){var a=t.extend({to:0,duration:500,easing:"swing",call:function(){}},e);return this.each(function(){var e=t(this),i=a.to>0?a.to:t.effect.getDimensions(e[0]).height;e.wrapInner('<div style="top:-'+i+'px;"></div>'),e.css({overflow:"visible",position:"relative",height:"0px"}).animate({height:i},{duration:a.duration,easing:a.easing,complete:function(){e.css({display:"",overflow:""}),a.call()}}),t(">div",e).css({position:"relative"}).animate({top:0},{easing:a.easing,duration:a.duration,complete:function(){e.html(t(this).html())}})})}}),t.effect={getDimensions:function(e,a){var i=new t.effect.Rectangle,n=t(e).css("display"),r=t(e).css("visibility"),s=0==t(e).height();return t(e).is(":hidden")&&(t(e).css({visibility:"hidden",display:"block"}),s&&t(e).css("height",""),t.browser.opera&&refElement.focus()),i.height=t(e).outerHeight(),i.width=t(e).outerWidth(),"none"==n&&(t(e).css({visibility:r,display:"none"}),s&&s&&t(e).css("height","0px")),i}},t.effect.Rectangle=function(){this.width=0,this.height=0,this.unit="px"}}(jQuery),function(t){t.extend(t.fn,{jPanel:function(e){var a=t.extend({header:"panelHeader",headerC:"panelHeaderContent",content:"panelContent",coll:"collapsable",exp:"expandable",footer:"panelFooter",footerC:"panelFooterContent"},e);return this.each(function(){var e=t(this),i=e.hasClass("close"),n=e.hasClass("collapse"),r=t(">div",e).addClass(a.content),s=t(">h1",e).wrap('<div class="'+a.header+'"><div class="'+a.headerC+'"></div></div>');n&&t('<a class="panelCollapseBtn" href=""></a>').addClass(i?a.exp:a.coll).insertAfter(s);var o=t(">div:first",e),l=(t('<div class="'+a.footer+'"><div class="'+a.footerC+'"></div></div>').appendTo(e),e.attr("defH")?e.attr("defH"):0),c=e.attr("minH")?e.attr("minH"):0;if(i?r.css({height:"0px",display:"none"}):l>0?r.height(l+"px"):c>0&&r.css("minHeight",c+"px"),n){var d=t("a.panelCollapseBtn",o),h=r.innerHeight()-6;l=c>0&&c>=h?c:h,d.click(function(){return d.hasClass(a.exp)?r.jBlindDown({to:l,call:function(){d.removeClass(a.exp).addClass(a.coll),c>0&&r.css("minHeight",c+"px")}}):(c>0&&r.css("minHeight",""),c>=h&&r.css("height",c+"px"),r.jBlindUp({call:function(){d.removeClass(a.coll).addClass(a.exp)}})),!1})}})}})}(jQuery),function(t){t.fn.extend({checkboxCtrl:function(e){return this.each(function(){var a=t(e||document),i=t(this).attr("box");i&&(a=t(this).closest(i));var n=t(this),r=t(this).attr("group").escape(),s=a.find(":checkbox[name="+r+"]");t(this).bind("checkSelected",function(){var e=a.find(":checkbox[name="+r+"]:checked");s.size()>0&&e.size()==s.size()?t(this).attr("checked",!0):t(this).attr("checked",!1)}),t(this).click(function(){if(t(this).is(":checkbox")){var e=t(this).is(":checked")?"all":"none";r&&t.checkbox.select(r,e,a)}else r&&t.checkbox.select(r,t(this).attr("selectType")||"all",a)}),s.each(function(){t(this).click(function(){n.trigger("checkSelected")})}),t(this).trigger("checkSelected")})}}),t.checkbox={selectAll:function(t,e){this.select(t,"all",e)},unSelectAll:function(t,e){this.select(t,"none",e)},selectInvert:function(t,e){this.select(t,"invert",e)},select:function(e,a,i){switch($checkboxLi=i.find(":checkbox[name='"+e+"']"),a){case"invert":$checkboxLi.each(function(){$checkbox=t(this),$checkbox.attr("checked",!$checkbox.is(":checked"))});break;case"none":$checkboxLi.attr("checked",!1);break;default:$checkboxLi.attr("checked",!0)}}}}(jQuery),function(t){var e=[],a=function(i){t.each(e,function(n){e[n]!=i&&(t("#"+e[n])[0]?t("#op_"+e[n]).css({height:"",width:""}).hide():t("#op_"+e[n]).remove(),t(document).unbind("click",a))})},i=function(e){var a=t("#"+e.data.ref,t(e.target).unitBox());return 0==a.size()?!1:void t.ajax({type:"POST",dataType:"json",url:e.data.refUrl.replace("{value}",encodeURIComponent(e.data.$this.attr("value"))),cache:!1,data:{},success:function(e){if(e){var i="";t.each(e,function(t){e[t]&&e[t].length>1&&(i+='<option value="'+e[t][0]+'">'+e[t][1]+"</option>")});var n=a.parents("div.combox:first");a.html(i).insertAfter(n),n.remove(),a.trigger("change").combox()}},error:DWZ.ajaxError})};t.extend(t.fn,{comboxSelect:function(i){var n=t.extend({selector:">a"},i);return this.each(function(){var i=t(this),r=t(n.selector,i),s=i.attr("id").escape();e.push(s),t(n.selector,i).click(function(){var e=t("#op_"+s);if(e.is(":hidden")){e.height()>300&&e.css({height:"300px",overflow:"scroll"});var n=i.offset().top+i[0].offsetHeight-50;n+e.height()>t(window).height()-20&&(n=t(window).height()-20-e.height()),e.css({top:n,left:i.offset().left}).show(),a(s),t(document).click(a)}else t(document).unbind("click",a),a();return!1}),t("#op_"+s).find(">li").comboxOption(r,i)})},comboxOption:function(e,a){return this.each(function(){t(">a",this).click(function(){var i=t(this);i.parent().parent().find(".selected").removeClass("selected"),i.addClass("selected"),e.text(i.text());var n=t("select",a);n.val()!=i.attr("value")&&t("select",a).val(i.attr("value")).trigger("change")})})},combox:function(){var a=[];return t.each(e,function(i){t("#"+e[i])[0]?a.push(e[i]):t("#op_"+e[i]).remove()}),e=a,this.each(function(e){var a=t(this).removeClass("combox"),n=a.attr("name"),r=a.val(),s=t("option[value="+r+"]",a).text(),o=a.attr("ref"),l=a.attr("refUrl")||"",c=a.attr("id")||Math.round(1e7*Math.random()),d='<div class="combox"><div id="combox_'+c+'" class="select"'+(o?' ref="'+o+'"':"")+">";d+='<a href="javascript:" class="'+a.attr("class")+'" name="'+n+'" value="'+r+'">'+s+"</a></div></div>";var h='<ul class="comboxop" id="op_combox_'+c+'">';t("option",a).each(function(){var e=t(this);h+='<li><a class="'+(r==e[0].value?"selected":"")+'" href="#" value="'+e[0].value+'">'+e[0].text+"</a></li>"}),h+="</ul>",t("body").append(h),a.after(d),t("div.select",a.next()).comboxSelect().append(a),o&&l&&a.unbind("change",i).bind("change",{ref:o,refUrl:l,$this:a},i)})}})}(jQuery),function(t){t.extend({History:{_hash:new Array,_cont:void 0,_currentHash:"",_callback:void 0,init:function(e,a){t.History._cont=e,t.History._callback=a;var i=location.hash.replace(/\?.*$/,"");if(t.History._currentHash=i,t.browser.msie){""==t.History._currentHash&&(t.History._currentHash="#"),t("body").append('<iframe id="jQuery_history" style="display: none;" src="about:blank"></iframe>');var n=t("#jQuery_history")[0],r=n.contentDocument||n.contentWindow.document;r.open(),r.close(),r.location.hash=i}t.isFunction(this._callback)&&t.History._callback(i.skipChar("#")),setInterval(t.History._historyCheck,100)},_historyCheck:function(){var e="";if(t.browser.msie){var a=t("#jQuery_history")[0],i=a.contentWindow;e=i.location.hash.skipChar("#").replace(/\?.*$/,"")}else e=location.hash.skipChar("#").replace(/\?.*$/,"");e!=t.History._currentHash&&(t.History._currentHash=e,t.History.loadHistory(e))},addHistory:function(e,a,i){t.History._currentHash=e;var n=[e,a,i];if(t.History._hash.push(n),t.browser.msie){var r=t("#jQuery_history")[0],s=r.contentDocument||r.contentWindow.document;s.open(),s.close(),s.location.hash=e.replace(/\?.*$/,""),location.hash=e.replace(/\?.*$/,"")}else location.hash=e.replace(/\?.*$/,"")},loadHistory:function(e){t.browser.msie&&(location.hash=e);for(var a=0;a<t.History._hash.length;a+=1)if(t.History._hash[a][0]==e)return void t.History._hash[a][1](t.History._hash[a][2])}}})}(jQuery),function(t){t.printBox=function(e){var a="printBox",i=t(e?"#"+e:"body"),n=t("#"+a);0==n.size()&&(n=t('<div id="'+a+'"></div>').appendTo("body")),n.html(i.html()).find("[layoutH]").height("auto"),window.print()}}(jQuery),function(t){t.extend(t.validator.messages,{required:"必填字段。",remote:"请修正该字段。",email:"请输入正确格式的电子邮件。",url:"请输入正确格式的网址。",date:"请输入正确格式的日期。",dateISO:"请输入正确格式的日期 (ISO)。",number:"请输入数字。",digits:"请输入整数。",creditcard:"请输入正确格式的信用卡号。",equalTo:"请再次输入相同的值。",accept:"请输入正确格式后缀名的字符串。",maxlength:t.validator.format("请输入长度最多是 {0} 的字符串。"),minlength:t.validator.format("请输入长度最少是 {0} 的字符串。"),rangelength:t.validator.format("请输入长度介于 {0} 和 {1} 之间的字符串。"),range:t.validator.format("请输入介于 {0} 和 {1} 之间的值。"),max:t.validator.format("请输入最大为 {0} 的值。"),min:t.validator.format("请输入最小为 {0} 的值。")}),t.setRegional("datepicker",{dayNames:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}),t.setRegional("alertMsg",{title:{error:"错误",info:"提示",warn:"警告",correct:"成功",confirm:"确认提示"},butMsg:{ok:"确定",yes:"是",no:"否",cancel:"取消"}})}(jQuery);